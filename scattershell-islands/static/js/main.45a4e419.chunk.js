(this["webpackJsonpscattershell-islands"]=this["webpackJsonpscattershell-islands"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),l=n.n(c);n(11),n(12);function i(e){var t=e.onActivate,n=e.onDeactivate,a=e.activated,c=e.cellType,l=e.canActivate,i=c,o=e.canDeactivate?r.a.createElement("a",{className:"cell--activated",href:"#",onClick:function(e){e.preventDefault(),n()}},i):r.a.createElement("span",{className:"cell--undeactivatable"},i),u=l?r.a.createElement("a",{className:"cell--unactivated",href:"#",onClick:function(e){e.preventDefault(),t()}},i):r.a.createElement("span",{className:"cell--unactivatable"},i);return a?o:u}var o=n(1),u=n(2),f=n(5),s="?",v="\ud83c\udf31",d="\ud83d\udee0\ufe0f",h="\ud83d\udccc",p="\u26f0\ufe0f",m=2,g=3,y=5,b=8,E=function(e,t){return{up:function(n){return e[n-t]},down:function(n){return e[n+t]},left:function(n){return n%t===0?void 0:e[n-1]},right:function(n){return n%t===t-1?void 0:e[n+1]}}},T=function(e){return e[Math.floor(Math.random()*e.length)]},w=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},j=function(e,t,n){var a=E(t,n),r=a.up,c=a.down,l=a.left,i=a.right;return[r(e),c(e),l(e),i(e)].filter((function(e){return e&&e.activated}))},O=function(e,t){var n=[],a={},r=null,c=e.filter((function(e){return e.activated}));if(!c[0])return!0;for(n.push(c[0].pos);n.length>0;)if(r=n.shift(),!a[r]){a[r]=!0;var l=j(r,e,t),i=!0,o=!1,u=void 0;try{for(var f,s=l[Symbol.iterator]();!(i=(f=s.next()).done);i=!0){var v=f.value;n.push(v.pos)}}catch(d){o=!0,u=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw u}}}return 0===e.filter((function(e){return e.activated&&!a[e.pos]})).length};function k(e){var t=Object(a.useState)((function(){return function(e){for(var t={cellType:s,activated:!1},n=function(t,n){return n*e+t},a=Array(e*e).fill(Object(o.a)({},t)).map((function(e,t){return Object(o.a)({},e,{pos:t})})),r=E(a,e),c=r.up,l=r.down,i=r.left,u=r.right,f=0;f<e/4;f++){var m=w(0,e-1),g=w(0,e-1),y=a[n(m,g)];a[n(m,g)]=Object(o.a)({},y,{cellType:h})}var b=T(a.filter((function(e){return e.cellType===h}))).pos,j=[c(b),l(b),i(b),u(b)].filter((function(e){return void 0!=e&&e.cellType===s})),O=T(j);if(a[O.pos]=Object(o.a)({},O,{cellType:v}),e>=3){for(var k=[a[b]];k.length<e;){var A=k[k.length-1].pos,N=[c(A),l(A),i(A),u(A)].filter((function(e){return void 0!=e&&e.cellType===s})),D=T(N);k.push(D)}var C=k[k.length-1];a[C.pos]=Object(o.a)({},C,{cellType:d})}if(8===e){for(var S=[a[b]];S.length<6;){var z=S[S.length-1].pos,x=[c(z),l(z),i(z),u(z)].filter((function(e){return void 0!=e&&e.cellType===s})),B=T(x);S.push(B)}var M=S[S.length-1];a[M.pos]=Object(o.a)({},M,{cellType:p})}return a}(e)})),n=Object(f.a)(t,2),r=n[0],c=n[1],l=r.reduce((function(t,n){var a=t[t.length-1];return a.length===e?[].concat(Object(u.a)(t),[[n]]):[].concat(Object(u.a)(t.slice(0,t.length-1)),[[].concat(Object(u.a)(a),[n])])}),[[]]),i=e-function(e){return e.reduce((function(e,t){return e+(t.activated?1:0)}),0)}(r),m=function(t,n){return n*e+t},g=function(t,n,a,r,c){var l=m(t,n),i=r[l];if(void 0!==i){var f=Object(u.a)(r);return f[l]=Object(o.a)({},i,{},a),O(f,e)?!!c||f:!c&&r}return!c&&r},y=[];(1===r.filter((function(e){return e.activated&&e.cellType===h})).length?y.push("\u2714\ufe0f one settlement"):y.push("need one settlement (".concat(h,")")),8===e)&&(r.filter((function(e){return e.activated&&e.cellType===p})).length>0?y.push("\u2714\ufe0f at least one mountain"):y.push("need mountain (".concat(p,")")));var b=[],k=E(r,e),A=k.up,N=k.down,D=k.left,C=k.right,S=r.filter((function(e){var t=[A(e.pos),N(e.pos),D(e.pos),C(e.pos)].filter((function(e){return e&&e.activated}));return!e.activated&&t.length>1})).length;S>0&&b.push("".concat(S," harbour").concat(S>1?"s":""," (fishing possible)"));var z=r.filter((function(e){return e.activated&&e.cellType===v})).length;0===z&&0===S?b.push("food may be hard to come by."):z>0&&b.push("bountiful food x".concat(z));var x=r.filter((function(e){return e.activated&&e.cellType===d})).length;return 0===x?b.push("materials may be hard to come by."):b.push("bountiful materials x".concat(x)),{grid:r,gridByRow:l,checkConnected:O,remainingActives:i,updateCell:function(e,t,n){c((function(a){return g(e,t,n,a,!1)}))},cellHasActivatedNeighbour:function(t,n){var a=m(t,n);return j(a,r,e).length>0},cellCanDeactivate:function(e,t){return g(e,t,{activated:!1},r,!0)},clearGrid:function(){c((function(e){return e.map((function(e){return Object(o.a)({},e,{activated:!1})}))}))},messages:y,notes:b}}function A(e){var t=e.islandSize,n=k(t),a=n.gridByRow,c=n.remainingActives,l=n.updateCell,o=n.cellHasActivatedNeighbour,u=n.cellCanDeactivate,f=n.clearGrid,s=n.messages,v=n.notes;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,c," remaining"),r.a.createElement("table",null,a.map((function(e,n){return r.a.createElement("tr",null,e.map((function(e,a){return r.a.createElement("td",null,r.a.createElement(i,{cellType:e.cellType,activated:e.activated,canActivate:c>0&&(c===t||o(a,n)),canDeactivate:u(a,n),onActivate:function(){return l(a,n,{activated:!0})},onDeactivate:function(){return l(a,n,{activated:!1})}}))})))}))),r.a.createElement("div",{className:"info"},r.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),f()}},"clear"),r.a.createElement("ul",{className:"messages"},s.map((function(e,t){return r.a.createElement("li",{key:"".concat(e).concat(t)},e)}))),v.length>0&&"-",r.a.createElement("ul",{className:"notes"},v.map((function(e,t){return r.a.createElement("li",{key:"".concat(e).concat(t)},e)})))))}var N=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(A,{islandSize:m}),r.a.createElement("hr",null),r.a.createElement(A,{islandSize:g}),r.a.createElement("hr",null),r.a.createElement(A,{islandSize:y}),r.a.createElement("hr",null),r.a.createElement(A,{islandSize:b}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.45a4e419.chunk.js.map