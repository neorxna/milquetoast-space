(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){},40:function(e,t,a){e.exports=a(59)},45:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n,l,r,o,i,s,c=a(0),u=a.n(c),d=a(28),m=a.n(d),h=(a(45),a(35)),p=a(1),f=a(5),b=a(8),g=a(63),O=a(65),E=(a(21),{Shellfish:"shellfish",Fish:"fish",Pigs:"pigs",Birds:"birds",BushFood:"bush food",Coconuts:"coconuts",RootVegetables:"root vegetables",PreciousShells:"precious shells",FreshWater:"fresh water",Flax:"flax",Bamboo:"bamboo",SturdyWood:"sturdy wood",FruitTrees:"fruit trees",Guano:"guano"}),j=(n={},Object(p.a)(n,E.Shellfish,1),Object(p.a)(n,E.Fish,2),Object(p.a)(n,E.Pigs,1),Object(p.a)(n,E.Birds,1),Object(p.a)(n,E.BushFood,2),Object(p.a)(n,E.Coconuts,1),Object(p.a)(n,E.RootVegetables,2),Object(p.a)(n,E.PreciousShells,0),Object(p.a)(n,E.FreshWater,2),Object(p.a)(n,E.Flax,0),Object(p.a)(n,E.Bamboo,1),Object(p.a)(n,E.SturdyWood,0),Object(p.a)(n,E.FruitTrees,1),Object(p.a)(n,E.Guano,0),n),v=(l={},Object(p.a)(l,E.Shellfish,1),Object(p.a)(l,E.Fish,0),Object(p.a)(l,E.Pigs,1),Object(p.a)(l,E.Birds,1),Object(p.a)(l,E.BushFood,0),Object(p.a)(l,E.Coconuts,1),Object(p.a)(l,E.RootVegetables,0),Object(p.a)(l,E.PreciousShells,2),Object(p.a)(l,E.FreshWater,0),Object(p.a)(l,E.Flax,2),Object(p.a)(l,E.Bamboo,1),Object(p.a)(l,E.SturdyWood,2),Object(p.a)(l,E.FruitTrees,1),Object(p.a)(l,E.Guano,1),l),y=a(29),w=a(10),S={Deep:"#121258",Med:"#5ba9ff",Shallow:"#7ccbff",Light:"#f3f1f1",Outline:"#000d16",Green:"#00b842"},F=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return u.a.createElement(y.a,Object.assign({icon:e},a))},T={icons:{chevrondown:F(w.b),chevronright:F(w.c),More:F(w.d),Cancel:F(w.f),Plus:F(w.e),checkmark:F(w.a)}},P="rocky",k="guano",B="small",C="medium",x="large",N=(r={},Object(p.a)(r,P,"You are disappointed to find an inhospitable outcrop of rocks in the middle of the ocean."),Object(p.a)(r,k,"This place is covered in guano, hospitable only to the many gulls that dwell here."),Object(p.a)(r,B,"You look out upon a modest but hospitable island."),Object(p.a)(r,C,"You are relieved to find a plentiful and hospitable island."),Object(p.a)(r,x,"You are glad to the gods to find a massive volcanic island, capable of sustaining a large population."),r),L=(o={},Object(p.a)(o,P,"/island_types/rock.png"),Object(p.a)(o,k,"/island_types/gull3.png"),Object(p.a)(o,B,"/island_types/shells.png"),Object(p.a)(o,C,"/island_types/coconuts.png"),Object(p.a)(o,x,"/island_types/volcano.png"),o),A=(i={},Object(p.a)(i,P,0),Object(p.a)(i,k,25),Object(p.a)(i,B,100),Object(p.a)(i,C,500),Object(p.a)(i,x,1e3),i),M="undeveloped",G="burgeoning",D="developed",W="highly developed",I="advanced",R=function(e){return 10===e.numTreasures&&e.hasTemple?I:e.hasTemple||e.numTreasures>5?W:e.population===A[e.type]?D:e.population>5?G:M},H={LaunchOutrigger:"outrigger",LaunchSmallFleet:"small fleet",LaunchLargeFleet:"large fleet"},Y=(s={},Object(p.a)(s,H.LaunchOutrigger,{"wood\u0394":-25,"food\u0394":-50,"energy\u0394":0}),Object(p.a)(s,H.LaunchSmallFleet,{"wood\u0394":-50,"food\u0394":-250,"energy\u0394":0}),Object(p.a)(s,H.LaunchLargeFleet,{"wood\u0394":-100,"food\u0394":-500,"energy\u0394":0}),s),V={population:0,hasTemple:!1,isDiscovered:!1,boonsAndBurdens:[],numDwellings:0,numTreasures:0},_=a(64),z={id:"1",name:"Birdstar",trueName:"Artheenkwas",isDiscovered:!0,x:30,y:30,type:k,resources:[],neighbours:["Great Ark","Shellcove","Holystone"],neighbourDistance:{"Great Ark":359,Shellcove:28,Holystone:62},population:0,numTreasures:0,numDwellings:0,hasTemple:!1};function J(e){var t=Object(f.a)({},z,e),a=t.island,n=t.islands,l=t.launchExpedition,r=t.wood,o=t.food,i=(t.energy,t.wind,t.addDwelling),s=t.addPerson,c=t.progressItems,d=a.neighbours.filter(function(e){return!n[e].isDiscovered&&0===c.filter(function(t){return t.destName===e}).length}),m=a.population<A[a.type]&&o>=50,h=a.numDwellings<5&&r>=100,p=u.a.createElement("section",{className:"current-island-info"},u.a.createElement("h3",null,a.name),"A ",u.a.createElement("b",null,a.type," island"),u.a.createElement("p",null,u.a.createElement("i",null,N[a.type])),u.a.createElement("ul",null,u.a.createElement("li",null,"Development level: ",u.a.createElement("b",null,R(a))),u.a.createElement("li",null,"Population: ",u.a.createElement("b",null,a.population),"/",A[a.type]),u.a.createElement("li",null,"Treasures: ",u.a.createElement("b",null,a.numTreasures),"/10"),u.a.createElement("li",null,"Dwellings: ",u.a.createElement("b",null,a.numDwellings),"/5"),u.a.createElement("li",null,"Has temple: ",u.a.createElement("b",null,a.hasTemple?"yes":"no")))),b=u.a.createElement("section",null,u.a.createElement("h3",null,"Resources on this island"),u.a.createElement("br",null)," ",0===a.resources.length?"Nothing of use.":"",u.a.createElement("ul",null,a.resources.map(function(e){return u.a.createElement("li",{key:"".concat(a.name,"_").concat(e)},u.a.createElement("b",null,e),u.a.createElement("br",null),u.a.createElement("i",null,"(",j[e]," food, ",v[e]," materials per tick)"))}))),g=u.a.createElement("section",{className:"current-island-expeditions mv2"},u.a.createElement("h4",null,"Unexplored Islands"),0===d.length?u.a.createElement("i",null,"There are no other islands nearby to discover."):u.a.createElement(u.a.Fragment,null,u.a.createElement("i",null,"The wind and sea whisper rumors of nearby islands waiting to be discovered."),u.a.createElement("ul",null,d.map(function(e,t){return u.a.createElement("li",{key:"".concat(e),style:Object(f.a)({marginBottom:"1em",paddingTop:"1em"},t>0?{borderTop:"1px solid ".concat(S.Outline)}:{})},"Launch expedition to ",u.a.createElement("b",null,e)," -",u.a.createElement("i",null," ",a.neighbourDistance[e]," km away"),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("ul",null,u.a.createElement("li",null,u.a.createElement(_.a,{onClick:function(){return l(a,e,H.LaunchOutrigger)}},"Launch outrigger")," ","costs 25 materials, 50 food, 10 energy."),u.a.createElement("li",null,u.a.createElement(_.a,{disabled:!0,onClick:function(){return l(a,e,H.LaunchSmallFleet)}},"Launch small fleet")," ","costs 50 materials, 250 food, 10 energy. risks 5 people"),u.a.createElement("li",null,u.a.createElement(_.a,{disabled:!0,onClick:function(){return l(a,e,H.LaunchLargeFleet)}},"Launch large fleet")," ","costs 100 materials, 500 food, 10 energy. risks 10 people")))}))));return u.a.createElement("div",{className:"current-island mv2"},u.a.createElement("div",{className:"current-island-header"},u.a.createElement("aside",{className:"current-island-illustration"},u.a.createElement("figure",null,u.a.createElement("img",{src:L[a.type]}))),p),b,u.a.createElement("section",{className:"current-island-options mv2"},u.a.createElement("ul",{className:"island-options measure"},u.a.createElement("li",null,u.a.createElement(_.a,{onClick:function(){s(a.name)},disabled:!m,className:"island-options-link"},"\ud83d\udc76 add person"),u.a.createElement("div",{className:"island-options-details"},u.a.createElement("p",null,"Add a person to this island's population. Costs ",u.a.createElement("b",null,"50 food"),"."),!m&&o<50?"\ud83d\ude45\u200d\u2640\ufe0f not enough food":"",!m&&o>=50?"\ud83d\ude45\u200d\u2640\ufe0f max population reached":"")),u.a.createElement("li",null,u.a.createElement(_.a,{onClick:function(){i(a.name)},disabled:!h,className:"island-options-link"},"\ud83c\udfe0 build dwelling"),u.a.createElement("div",{className:"island-options-details"},u.a.createElement("p",null,"Build a dwelling to house more people on this island. Up to five dwellings can be built on this island. Costs ",u.a.createElement("b",null,"100 materials"),"."),!h&&r<100?"\ud83d\ude45\u200d\u2640\ufe0f not enough materials":"",!h&&r>=100?"\ud83d\ude45\u200d\u2640\ufe0f max reached":"")),u.a.createElement("li",null,u.a.createElement(_.a,{disabled:!0,className:"island-options-link"},"\ud83d\ude4f build temple"),u.a.createElement("div",{className:"island-options-details"},u.a.createElement("p",null,"Build a temple to find treasures to increase the prestige of the island. Costs ",u.a.createElement("b",null,"1000 food")," and ",u.a.createElement("b",null,"1000 energy"),"."),u.a.createElement("p",null,"Building a temple will bring forth a boon or burden for this island and its descendants."))))),g)}var U=[["Morrigan","The Crook",16],["The Crook","Morrigan",16],["Morrigan","Great Arc",20],["Great Arc","Morrigan",20],["Fivestone","The Crook",14],["The Crook","Fivestone",14],["Shell Cove","Great Arc",12],["Great Arc","Shell Cove",12],["The Splinter","Great Arc",25],["Great Arc","The Splinter",25],["The Pip","The Splinter",15],["The Splinter","The Pip",15],["Afallon","The Splinter",22],["The Splinter","Afallon",22],["Brightreach","The Splinter",23],["The Splinter","Brightreach",23],["Afallon","The Pip",7],["The Pip","Afallon",7],["Brightreach","The Pip",13],["The Pip","Brightreach",13],["Birdstar","The Pip",25],["The Pip","Birdstar",25],["Brightreach","Afallon",12],["Afallon","Brightreach",12],["Old Crone","Birdstar",20],["Birdstar","Old Crone",20],["Gull's Rest","Shell Cove",22],["Shell Cove","Gull's Rest",22],["Mother","Shell Cove",28],["Shell Cove","Mother",28],["Elder","Shell Cove",30],["Shell Cove","Elder",30],["Younger","Mother",15],["Mother","Younger",15],["Father","Mother",10],["Mother","Father",10],["Twinstone","Mother",11],["Mother","Twinstone",11],["Obsidian Point","Gull's Rest",13],["Gull's Rest","Obsidian Point",13],["Last Hope","Obsidian Point",30],["Obsidian Point","Last Hope",30],["Island of Pearls","Obsidian Point",29],["Obsidian Point","Island of Pearls",29],["Island of Pearls","Last Hope",9],["Last Hope","Island of Pearls",9]],$=function(e){return U.filter(function(t){var a=Object(b.a)(t,3),n=a[0];a[1],a[2];return e===n}).reduce(function(e,t){var a=Object(b.a)(t,3),n=(a[0],a[1]),l=a[2];return Object(f.a)({},e,Object(p.a)({},n,l))},{})};console.log($("Last Hope"));var q,K=function(e,t,a,n,l){return{id:e,name:e,x:a,y:n,type:t,resources:l.map(function(e){return E[e]}),neighbours:Object.keys($(e)),neighbourDistance:$(e)}},Q={"Shell Cove":K("Shell Cove",B,63,49,["PreciousShells","Fish"]),"Great Arc":K("Great Arc",x,56,58,["Flax","Bamboo","BushFood","RootVegetables","SturdyWood"]),Morrigan:K("Morrigan",C,46,75,["Fish","RootVegetables","BushFood","Flax"]),"The Crook":K("The Crook",B,34,87,["Shellfish","Fish","PreciousShells"]),Fivestone:K("Fivestone",P,23,93,[]),Elder:K("Elder",P,87,55,[]),Younger:K("Younger",k,95,48,["Guano","Birds"]),Mother:K("Mother",C,86,60,["Flax","Birds","PreciousShells","BushFood"]),Father:K("Father",C,95,60,["Bamboo","Fish","Pigs","SturdyWood"]),Twinstone:K("Twinstone",P,92,70,[]),Birdstar:K("Birdstar",k,40,30,["Guano","Birds"]),"Last Hope":K("Last Hope",x,97,8,["Shellfish","Fish","Birds","SturdyWood","FreshWater"]),"Island of Pearls":K("Island of Pearls",B,98,18,["PreciousShells","Shellfish","Coconuts"]),"Obsidian Point":K("Obsidian Point",P,73,19,[]),"Gull's Rest":K("Gull's Rest",k,70,30,["Guano","Birds"]),"Old Crone":K("Old Crone",C,40,10,["Coconuts","RootVegetables","Pigs","BushFood"]),"The Splinter":K("The Splinter",P,33,55,[]),Afallon:K("Afallon",x,14,45,["FruitTrees","FreshWater","SturdyWood","Birds","Pigs"]),"The Pip":K("The Pip",B,22,47,["FruitTrees","Fish","SturdyWood"]),Brightreach:K("Brightreach",C,23,35,["PreciousShells","FreshWater","Flax","Shellfish"])},X=a(33),Z=a(34),ee=a.n(Z),te={places:[{id:"a",x:80,y:120,name:"A"},{id:"b",x:200,y:100,name:"B",isActive:!0,isBig:!0},{id:"c",x:150,y:250,name:"C",isBig:!0}],paths:[],baseMarkerOptions:{fill:S.Green,fillStyle:"solid",hachureAngle:65,roughness:2,stroke:0,fillWeight:2,bowing:2},activePlaceOptions:{fill:S.Green,stroke:S.Light,strokeWidth:5},inactivePlaceOptions:{},pathOptions:{},sizes:(q={},Object(p.a)(q,P,5),Object(p.a)(q,k,10),Object(p.a)(q,B,15),Object(p.a)(q,C,20),Object(p.a)(q,x,35),q)};var ae=function(e){var t=Object(f.a)({},te,e),a=t.places,n=t.paths,l=t.baseMarkerOptions,r=t.activePlaceOptions,o=t.inactivePlaceOptions,i=t.lineOptions,s=t.sizes,d=t.currentIsland,m=-40,h=0,p=a,g=l,O=["The Pip","Elder","Father"],E=Object(c.useRef)(null);function j(t){var a=ee.a.svg(t),l=X(t);Object.values(p).forEach(function(n){if(n.isDiscovered){var i=function(e){var t=e.name,n=e.x,l=e.y,i=e.type,c=e.markerOptions,u=Object(f.a)({},g,t===d?r:o,c);return a.circle(5*n+m,5*l+h,s[i],u)}(n);t.appendChild(i),function(t){l.link("javascript:;").text(t.name).fill(S.Light).x(5*t.x+m+(-1!==O.indexOf(t.name)?25+s[t.type]:0)).y(5*t.y+h+(-1!==O.indexOf(t.name)?-8:s[t.type]/2+1)).font({family:"Open Sans",size:16,anchor:"middle"}).on("click",function(){e.setCurrentIsland(t.name)})}(n)}}),n.forEach(function(e){var n,l,r=Object(b.a)(e,2),o=r[0],s=r[1],c=(n=p[o],l=p[s],a.line(n.x,n.y,l.x,l.y,Object(f.a)({},g,i,{stroke:S.Light})));t.appendChild(c)})}Object(c.useEffect)(function(){j(E.current),console.log("rendered initial map")},[E.current]);var v=Object.entries(a).map(function(e){var t=Object(b.a)(e,2);return t[0],t[1].isDiscovered}),y=function(){var e=E.current;if(e){for(console.log("re-rendering the map");e.lastChild;)e.removeChild(e.lastChild);j(e)}};return Object(c.useEffect)(y,v),Object(c.useEffect)(y,[d]),u.a.createElement("svg",{ref:E,className:"map-svg"})};Object(g.f)(T),Object(g.e)({typography:{families:{default:"Open Sans"}},fonts:{large:{fontFamily:"Open Sans"},xLarge:{fontFamily:"Open Sans"},xxLarge:{fontFamily:"Open Sans"},superLarge:{fontFamily:"Open Sans"},mega:{fontFamily:"Open Sans"}},palette:{}});var ne=500;var le=function(){var e=Object(c.useState)(0),t=Object(b.a)(e,2),a=t[0],n=t[1],l=Object(c.useState)([]),r=Object(b.a)(l,2),o=r[0],i=r[1],s=Object(c.useState)({islands:Object.keys(Q).reduce(function(e,t){return Object(f.a)({},e,Object(p.a)({},t,V))},{}),player:{wood:0,food:0,wind:0,energy:0}}),d=Object(b.a)(s,2),m=d[0],g=d[1],E=m.player,y=E.wind,w=E.wood,S=E.food,F=E.energy,T=Object(c.useState)("Morrigan"),P=Object(b.a)(T,2),k=P[0],B=P[1],C=function(){return Object.keys(Q).reduce(function(e,t){return Object(f.a)({},e,Object(p.a)({},t,Object(f.a)({},Q[t],m.islands[t])))},{})};Object(c.useEffect)(function(){N("Morrigan")},[]);var x=function(e,t,a,n,l){g(function(r){var o=e.wood\u0394,i=e.food\u0394,s=e.energy\u0394,c=e.wind\u0394,u=function(e,t){return e+t<0||void 0==t?e:e+t},d={wood:u(r.player.wood,o),food:u(r.player.food,i),wind:Math.min(u(r.player.wind,c),100),energy:u(r.player.energy,s)},m=o&&d.wood===r.player.wood||i&&d.food===r.player.food||c&&d.wind===r.player.wind||s&&d.energy===r.player.energy;m||void 0==n||n();var h={player:Object(f.a)({},r.player,d||{}),islands:Object(f.a)({},r.islands,t&&a?Object(p.a)({},t,Object(f.a)({},r.islands[t],a)):{})};return!m||l?h:r})},N=function(e){console.log("discovered ".concat(e)),x({},e,{isDiscovered:!0},null,!0)};return function(e,t){var a=Object(c.useRef)();Object(c.useEffect)(function(){a.current=e},[e]),Object(c.useEffect)(function(){if(null!==t){var e=setInterval(function(){a.current()},t);return function(){return clearInterval(e)}}},[t])}(function(){var e=0,t=0,l=0,r=0;n(9===a?0:a+1),4!==a&&9!==a||(Object.entries(m.islands).filter(function(e){var t=Object(b.a)(e,2);return t[0],t[1].isDiscovered}).forEach(function(a){var n=Object(b.a)(a,2),l=n[0];n[1],e+=Q[l].resources.reduce(function(e,t){return e+j[t]},0),t+=Q[l].resources.reduce(function(e,t){return e+v[t]},0)}),l=1,r=Math.floor(21*Math.random())-10),o.filter(function(e){return e.progress>=e.duration}).forEach(function(e){e.action()});var s=o.filter(function(e){return e.progress<e.duration});i(s.map(function(e){return Object(f.a)({},e,{progress:e.progress+1+.05*y})})),x({"wood\u0394":t,"food\u0394":e,"energy\u0394":l,"wind\u0394":r})},ne),u.a.createElement(O.a,null,u.a.createElement("main",{className:"game"},u.a.createElement("aside",{className:"left"},u.a.createElement("h2",{className:"title title-subtitle"},"sailsongs of"),u.a.createElement("h1",{className:"title title-title"},"scattershell"),u.a.createElement("div",null,"version 0.5"),u.a.createElement("section",{className:"game-meters-container"},u.a.createElement("ul",{className:"game-meters"},u.a.createElement("li",null,u.a.createElement("h4",{className:"game-meter-number"},w)," materials"),u.a.createElement("li",null,u.a.createElement("h4",{className:"game-meter-number"},S)," food"),u.a.createElement("li",null,u.a.createElement("h4",{className:"game-meter-number"},y)," wind"),u.a.createElement("li",null,u.a.createElement("h4",{className:"game-meter-number"},F)," energy"))),u.a.createElement("section",{className:"journeys-container"},u.a.createElement("h4",null,"In progress"),o.length>0?u.a.createElement("ul",null,o.map(function(e){var t=e.name,a=e.progress,n=e.duration,l=e.action,r=e.destName;return u.a.createElement("li",{key:"journey-".concat(l,"-").concat(r)},t," (",Math.round(a/10)," / ",n/10,")")})):"nothing in progress"),u.a.createElement("section",null,u.a.createElement(ae,{places:C(),currentIsland:k,setCurrentIsland:B}))),u.a.createElement("section",{className:"right"},u.a.createElement(J,{island:C()[k],islands:C(),launchExpedition:function(e,t,a){x(Y[a],null,null,function(){i([].concat(Object(h.a)(o),[{duration:10*e.neighbourDistance[t],name:"Expedition from ".concat(e.name," to ").concat(t," via ").concat(a),source:e,destName:t,action:function(){N(t)},progress:0}]))})},addPerson:function(e){return x({"food\u0394":-50},e,{population:m.islands[e].population+1})},addDwelling:function(e){return x({"wood\u0394":-100},e,{numDwellings:m.islands[e].numDwellings+1})},food:S,wind:y,wood:w,energy:F,progressItems:o}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(u.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,1,2]]]);
//# sourceMappingURL=main.c320e47f.chunk.js.map