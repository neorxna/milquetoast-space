(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a,r,o,l,i,c,s,u,d=n(0),m=n.n(d),f=n(33),g=n.n(f),h=(n(77),n(10)),p=n(120),b=n(123),v=(n(38),n(58)),O=n(19),y={Deep:"#121258",Med:"#5ba9ff",Shallow:"#7ccbff",Light:"#f3f1f1",Outline:"#000d16",Green:"#00b842",Disabled:"#8d8d8d",Gold:"#f1da37"},j=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return m.a.createElement(v.a,Object.assign({icon:e},n))},E={icons:{chevrondown:j(O.b),chevronright:j(O.c),More:j(O.d),Cancel:j(O.f),Plus:j(O.e),checkmark:j(O.a)}},S=n(2),w={Shellfish:"shellfish",Fish:"fish",Pigs:"pigs",Birds:"birds",BushFood:"bush food",Coconuts:"coconuts",RootVegetables:"root vegetables",PreciousShells:"precious shells",FreshWater:"fresh water",Flax:"flax",Bamboo:"bamboo",SturdyWood:"sturdy wood",FruitTrees:"fruit trees",Guano:"guano"},A=(a={},Object(S.a)(a,w.Shellfish,!1),Object(S.a)(a,w.Fish,!1),Object(S.a)(a,w.Pigs,!1),Object(S.a)(a,w.Birds,!1),Object(S.a)(a,w.BushFood,!1),Object(S.a)(a,w.Coconuts,!1),Object(S.a)(a,w.RootVegetables,!0),Object(S.a)(a,w.PreciousShells,!1),Object(S.a)(a,w.FreshWater,!1),Object(S.a)(a,w.Flax,!1),Object(S.a)(a,w.Bamboo,!1),Object(S.a)(a,w.SturdyWood,!1),Object(S.a)(a,w.FruitTrees,!0),Object(S.a)(a,w.Guano,!1),a),T=(r={},Object(S.a)(r,w.Shellfish,!1),Object(S.a)(r,w.Fish,!1),Object(S.a)(r,w.Pigs,!1),Object(S.a)(r,w.Birds,!1),Object(S.a)(r,w.BushFood,!1),Object(S.a)(r,w.Coconuts,!0),Object(S.a)(r,w.RootVegetables,!0),Object(S.a)(r,w.PreciousShells,!0),Object(S.a)(r,w.FreshWater,!1),Object(S.a)(r,w.Flax,!1),Object(S.a)(r,w.Bamboo,!1),Object(S.a)(r,w.SturdyWood,!0),Object(S.a)(r,w.FruitTrees,!1),Object(S.a)(r,w.Guano,!1),r),F=(o={},Object(S.a)(o,w.Shellfish,!1),Object(S.a)(o,w.Fish,!1),Object(S.a)(o,w.Pigs,!0),Object(S.a)(o,w.Birds,!1),Object(S.a)(o,w.BushFood,!1),Object(S.a)(o,w.Coconuts,!0),Object(S.a)(o,w.RootVegetables,!0),Object(S.a)(o,w.PreciousShells,!1),Object(S.a)(o,w.FreshWater,!1),Object(S.a)(o,w.Flax,!1),Object(S.a)(o,w.Bamboo,!1),Object(S.a)(o,w.SturdyWood,!1),Object(S.a)(o,w.FruitTrees,!0),Object(S.a)(o,w.Guano,!0),o),P=(l={},Object(S.a)(l,w.Shellfish,2),Object(S.a)(l,w.Fish,3),Object(S.a)(l,w.Pigs,2),Object(S.a)(l,w.Birds,1),Object(S.a)(l,w.BushFood,3),Object(S.a)(l,w.Coconuts,2),Object(S.a)(l,w.RootVegetables,1),Object(S.a)(l,w.PreciousShells,0),Object(S.a)(l,w.FreshWater,2),Object(S.a)(l,w.Flax,0),Object(S.a)(l,w.Bamboo,1),Object(S.a)(l,w.SturdyWood,0),Object(S.a)(l,w.FruitTrees,2),Object(S.a)(l,w.Guano,0),l),x=(i={},Object(S.a)(i,w.Shellfish,1),Object(S.a)(i,w.Fish,0),Object(S.a)(i,w.Pigs,1),Object(S.a)(i,w.Birds,1),Object(S.a)(i,w.BushFood,0),Object(S.a)(i,w.Coconuts,2),Object(S.a)(i,w.RootVegetables,0),Object(S.a)(i,w.PreciousShells,2),Object(S.a)(i,w.FreshWater,0),Object(S.a)(i,w.Flax,3),Object(S.a)(i,w.Bamboo,2),Object(S.a)(i,w.SturdyWood,2),Object(S.a)(i,w.FruitTrees,1),Object(S.a)(i,w.Guano,2),i),N=n(4),k="rocky",C="guano",B="small",D="medium",G="large",L=(c={},Object(S.a)(c,k,"You are disappointed to find an inhospitable outcrop of rocks in the middle of the ocean."),Object(S.a)(c,C,"This place is covered in guano, hospitable only to the many gulls that dwell here."),Object(S.a)(c,B,"You look out upon a modest but hospitable island."),Object(S.a)(c,D,"You are relieved to find a hospitable and plentiful island."),Object(S.a)(c,G,"You are thankful to the gods to find a massive volcanic island, capable of sustaining a large population."),c),M=(s={},Object(S.a)(s,k,"/island_types/rock_cropped.png"),Object(S.a)(s,C,"/island_types/gull3_cropped.png"),Object(S.a)(s,B,"/island_types/shells_cropped.png"),Object(S.a)(s,D,"/island_types/coconuts_cropped.png"),Object(S.a)(s,G,"/island_types/volcano_cropped.png"),s),I=(u={},Object(S.a)(u,k,0),Object(S.a)(u,C,5),Object(S.a)(u,B,10),Object(S.a)(u,D,25),Object(S.a)(u,G,50),u),W={Undeveloped:"undeveloped",Burgeoning:"burgeoning",Developed:"developed",HighlyDeveloped:"highly developed",Advanced:"advanced"},R=[["Morrigan","The Crook",16],["The Crook","Morrigan",16],["Morrigan","Great Arc",20],["Great Arc","Morrigan",20],["Fivestone","The Crook",14],["The Crook","Fivestone",14],["Shell Cove","Great Arc",12],["Great Arc","Shell Cove",12],["The Splinter","Great Arc",25],["Great Arc","The Splinter",25],["Great Arc","The Pip",40],["The Pip","The Splinter",15],["The Splinter","The Pip",15],["Afallon","The Splinter",22],["The Splinter","Afallon",22],["Brightreach","The Splinter",23],["The Splinter","Brightreach",23],["Afallon","The Pip",7],["The Pip","Afallon",7],["Brightreach","The Pip",13],["The Pip","Brightreach",13],["Birdstar","The Pip",25],["The Pip","Birdstar",25],["Brightreach","Afallon",12],["Afallon","Brightreach",12],["Old Crone","Birdstar",20],["Birdstar","Old Crone",20],["Gull's Rest","Shell Cove",22],["Shell Cove","Gull's Rest",22],["Mother","Shell Cove",28],["Shell Cove","Mother",28],["Elder","Shell Cove",30],["Shell Cove","Elder",30],["Younger","Mother",15],["Mother","Younger",15],["Father","Mother",10],["Mother","Father",10],["Twinstone","Mother",11],["Mother","Twinstone",11],["Obsidian Point","Gull's Rest",13],["Gull's Rest","Obsidian Point",13],["Last Hope","Obsidian Point",30],["Obsidian Point","Last Hope",30],["Island of Pearls","Obsidian Point",29],["Obsidian Point","Island of Pearls",29],["Island of Pearls","Last Hope",9],["Last Hope","Island of Pearls",9]],Y=function(e){return R.filter(function(t){var n=Object(h.a)(t,3),a=n[0];n[1],n[2];return e===a}).reduce(function(e,t){var n=Object(h.a)(t,3),a=(n[0],n[1]),r=n[2];return Object(N.a)({},e,Object(S.a)({},a,r))},{})},V=function(e,t,n,a,r){return{id:e,name:e,x:n,y:a,type:t,resources:r.map(function(e){return w[e]}),neighbours:Object.keys(Y(e)),neighbourDistance:Y(e)}},q={"Shell Cove":V("Shell Cove",B,63,49,["PreciousShells","Fish"]),"Great Arc":V("Great Arc",G,56,58,["Flax","Bamboo","BushFood","SturdyWood"]),Morrigan:V("Morrigan",D,46,75,["Fish","RootVegetables","BushFood","Flax"]),"The Crook":V("The Crook",B,34,87,["Shellfish","Fish","PreciousShells"]),Fivestone:V("Fivestone",k,23,93,[]),Elder:V("Elder",k,87,55,[]),Younger:V("Younger",C,95,48,["Guano","Birds"]),Mother:V("Mother",D,86,60,["Flax","Birds","PreciousShells","BushFood"]),Father:V("Father",D,95,60,["Bamboo","Fish","Pigs","SturdyWood"]),Twinstone:V("Twinstone",k,92,70,[]),Birdstar:V("Birdstar",C,40,30,["Guano","Birds"]),"Last Hope":V("Last Hope",G,97,8,["Shellfish","Birds","SturdyWood","FreshWater","FruitTrees"]),"Island of Pearls":V("Island of Pearls",B,98,18,["PreciousShells","Shellfish","Coconuts"]),"Obsidian Point":V("Obsidian Point",k,73,19,[]),"Gull's Rest":V("Gull's Rest",C,70,30,["Guano","Birds"]),"Old Crone":V("Old Crone",D,40,10,["Coconuts","RootVegetables","Pigs","BushFood"]),"The Splinter":V("The Splinter",k,33,55,[]),Afallon:V("Afallon",G,14,45,["FruitTrees","FreshWater","SturdyWood","Birds","Pigs"]),"The Pip":V("The Pip",B,22,47,["FruitTrees","Fish","SturdyWood"]),Brightreach:V("Brightreach",D,23,35,["PreciousShells","FreshWater","Flax","Shellfish"])};function _(e){var t=e.island,n=t.resources,a=(t.name,t.population),r=t.numGardens;return m.a.createElement("section",{className:"current-island-resources"},0===n.length?"Nothing to use.":m.a.createElement("ul",null,n.map(function(e){var n=P[e],o=x[e],l="".concat(n," food, ").concat(o," materials per day ").concat(r>0&&A[e]?"plus ".concat(r," food from gardens"):""),i=0===q[t.name].resources.filter(function(t){return t===e}).length,c=T[e],s=c&&a>=5?"\u2714":null,u=F[e];return m.a.createElement("li",{title:l,key:"".concat(e)},m.a.createElement("b",null,e)," ","\u2692\ufe0f".repeat(o)," ","\ud83e\udd5d".repeat(n)," ",r>0&&A[e]?"\ud83e\udd6c".repeat(r):"",c||u?m.a.createElement("ul",{className:"current-island-resources-details"},m.a.createElement("li",null,c?"- requires 5 people to gather":null,s),m.a.createElement("li",null,u?"- dispersible":null),m.a.createElement("li",null,i?"- was dispersed here":null),m.a.createElement("li",null,e===w.Guano?"- will provide bonus to garden":null)):null)})))}var z=n(8);function H(e,t,n,a){var r=t.player,o=t.islands[n].population,l=ue[e],i=null==a?null:o>=a?{met:!0,text:"".concat(a," people \u2714")}:{met:!1,text:"not enough people (need ".concat(a-o," more)")};return[].concat(Object(z.a)(function(e,t){var n=e.food,a=e.wood,r=e.energy,o=t["food\u0394"],l=t["wood\u0394"],i=t["energy\u0394"],c=n+o,s=a+l,u=r+i;return[null==o?null:c>=0?{met:!0,text:"".concat(-o," food \u2714")}:{met:!1,text:"not enough food (need ".concat(-c,")")},null==l?null:s>=0?{met:!0,text:"".concat(-l," materials \u2714")}:{met:!1,text:"not enough materials (need ".concat(-s,")")},null==i?null:u>=0?{met:!0,text:"".concat(-i," energy \u2714")}:{met:!1,text:"not enough energy (need ".concat(-u,")")}].filter(function(e){return null!=e})}(r,l)),[i]).filter(function(e){return null!=e})}var U=function(e,t,n){var a=e.progressItems,r=(e.islands,n.actionType),o=a.filter(function(e){var a=r===e.actionType,o=t===e.islandName,l=a&&n.toName===e.task.toName,i=0===e.progress;return o&&l&&!i}).length>0;return[].concat(Object(z.a)(H(r,e,t,ye[r])),[{met:!o,text:o?"already voyaging":""}])},J=function(e,t){var n=e.islands,a=e.progressItems,r=se.AddPerson,o=n[t],l=o.population,i=o.bonusPopulation,c=o.hasSettlement,s=q[t],u=i+I[s.type],d=l+a.filter(function(e){return e.actionType===r&&e.islandName===t}).length===u;return[].concat(Object(z.a)(H(r,e,t)),[{met:!d,text:d?"max population reached":""},{met:c,text:c?"":"no settlement"}])},Q=function(e,t){var n=se.AddDwelling,a=e.islands,r=e.progressItems,o=a[t],l=o.numDwellings,i=o.hasSettlement,c=l+r.filter(function(e){return e.actionType===n&&e.islandName===t}).length===Se;return[].concat(Object(z.a)(H(se.AddDwelling,e,t)),[{met:!c,text:c?"max dwellings built here":""},{met:i,text:i?"":"no settlement"}])},$=function(e,t){var n=e.progressItems,a=se.AddSettlement,r=1===n.filter(function(e){return e.actionType===a&&e.islandName===t}).length;return[].concat(Object(z.a)(H(se.AddSettlement,e,t,pe)),[{met:!r,text:r?"settlement in progress":""}])},K=function(e,t){var n=e.progressItems,a=se.AddTemple,r=1===n.filter(function(e){return e.actionType===a&&e.islandName===t}).length;return[].concat(Object(z.a)(H(se.AddTemple,e,t)),[{met:!r,text:r?"temple in progress":""}])},X=function(e,t){var n=e.islands,a=e.progressItems,r=n[t],o=r.resources,l=r.numGardens,i=se.AddGarden,c=l+a.filter(function(e){return e.actionType===i&&e.islandName===t}).length===we,s=o.filter(function(e){return A[e]}).length>0;return[].concat(Object(z.a)(H(se.AddGarden,e,t,5)),[{met:!c,text:c?"max gardens planted here":""},{met:s,text:s?"island has horticultural resources \u2714":"no horticultural resources here"}])};function Z(e,t,n,a){return function(r){var o=e.wood\u0394,l=e.food\u0394,i=e.energy\u0394,c=e.wind\u0394,s=r.player,u=r.islands,d=(r.world,s.wood),m=s.food,f=s.wind,g=s.energy,h=function(e,t){return e+t<0||void 0==t?e:e+t},p={wood:h(d,o),food:h(m,l),wind:Math.min(h(f,c),100),energy:h(g,i)},b=o&&p.wood===d||l&&p.food===m||c&&p.wind===f||i&&p.energy===g,v=Object(N.a)({},s,p||{}),O=void 0!=t&&t(r),y=!1===O,j=void 0==t?u:O;b||void 0==n||y||n();var E=Object(N.a)({},r,{player:v,islands:j});return b&&!a||y?r:E}}var ee=function(e,t){return function(n){var a=n.islands,r=a[e],o=t(r);return Object(N.a)({},a,Object(S.a)({},e,Object(N.a)({},r,o)))}},te=function(e){return 0===e.filter(function(e){return!e.met}).length},ne=function(e){return e.islands};function ae(e,t){var n=t.actionType,a=t.isBeginning,r=ge[n].cost;return Z(a?{}:r,a?ne:function(a){var r=a.islands,o=r[e],l=U(a,e,t),i=te(l),c=ye[n],s=Object(N.a)({},r,Object(S.a)({},e,Object(N.a)({},o,{population:o.population-c})));return!!i&&s})}function re(e,t){var n=t.toName,a=t.actionType,r=(t.isBeginning,ye[a]);return Z({},function(t){var o=t.islands,l=o[n],i=(o[e]||{scatterings:[],resources:[]}).resources,c=a===se.LaunchFleet?i.filter(function(e){return F[e]&&-1===l.resources.indexOf(e)}):[],s=c.length>0?he(c):null,u=[].concat(Object(z.a)(l.resources),[s]).filter(function(e){return null!=e}),d=q[n],m=I[d.type],f=l.bonusPopulation+m,g=l.population+r,h=g>f?f:g;return Object(N.a)({},o,Object(S.a)({},n,Object(N.a)({},l,{isDiscovered:!0,resources:u,scatterings:Object(z.a)(l.scatterings),population:h})))},null,!0)}var oe,le,ie,ce=function(){return e=function(e){var t=e.day,n=e.dayOfWeek,a=e.weekOfYear,r=e.year;return{day:t+1,dayOfWeek:7===n?1:n+1,weekOfYear:52===a?1:7===n?a+1:a,year:52===a?r+1:r}},function(t){var n=t.world;return Object(N.a)({},t,{world:e(n)})};var e},se={LaunchOutrigger:"outrigger voyage",LaunchFleet:"fleet voyage",AddPerson:"new child",AddDwelling:"build dwelling",AddSettlement:"raise settlement",AddGarden:"plant garden",AddTemple:"build temple",SpendEnergy:"accept offerings"},ue=(oe={},Object(S.a)(oe,se.LaunchOutrigger,{"wood\u0394":-25,"food\u0394":-50,"energy\u0394":-10}),Object(S.a)(oe,se.LaunchFleet,{"wood\u0394":-100,"food\u0394":-200,"energy\u0394":-20}),Object(S.a)(oe,se.AddPerson,{"food\u0394":-50,"energy\u0394":-25}),Object(S.a)(oe,se.AddDwelling,{"wood\u0394":-100}),Object(S.a)(oe,se.AddSettlement,{"wood\u0394":-250}),Object(S.a)(oe,se.AddGarden,{"wood\u0394":-500}),Object(S.a)(oe,se.AddTemple,{"wood\u0394":-1e3,"food\u0394":-1e3,"energy\u0394":-100}),oe),de=function(e){var t=e.islandName,n=e.actionType,a=e.task,r=a.toName,o=a.destinationIsDiscovered,l=ge[n].numPeople,i=q[r],c=i.type===k,s=o?"The voyage disembarked safely.":"A ".concat(i.type," island was discovered!"),u="An inhospitable outcrop of rocks was encountered. The ".concat(l," voyagers perished.");return"The voyage from ".concat(t," arrived at ").concat(r,". ").concat(c?u:s)},me=function(e){var t=e.islandName,n=e.toName;return e.isBeginning?10:10*q[t].neighbourDistance[n]},fe=function(e){e.actionType;var t=e.destinationIsDiscovered,n=e.islandName,a=e.toName;return e.isBeginning?"Voyage to ".concat(a):"Voyage from ".concat(n," to ").concat(t?a:"an undiscovered land")},ge=(le={},Object(S.a)(le,se.SpendEnergy,{text:"accept offerings",beginStateChange:function(e,t,n){return function(t){var n=t.player,a=q[e].resources,r=n.energy,o=n.food,l=n.wood,i=a.reduce(function(e,t){return e+P[t]},0),c=a.reduce(function(e,t){return e+x[t]},0),s=Object(N.a)({},n,{food:o+i*r,wood:l+c*r,energy:0});return Object(N.a)({},t,{player:s})}},endStateChange:function(){},finishMessage:function(){},emoji:"\u26a1",validate:function(){return[{met:!0}]},getDuration:function(){},getName:function(){},hidden:!0}),Object(S.a)(le,se.LaunchOutrigger,{text:"launch outrigger",beginStateChange:ae,endStateChange:re,finishMessage:de,emoji:"\u26f5",cost:ue[se.LaunchOutrigger],validate:U,getDuration:me,getName:fe,numPeople:2}),Object(S.a)(le,se.LaunchFleet,{text:"launch fleet",beginStateChange:ae,endStateChange:re,finishMessage:de,emoji:"\u26f5",cost:ue[se.LaunchFleet],validate:U,getDuration:me,getName:fe,numPeople:5}),Object(S.a)(le,se.AddPerson,{text:"spawn person",beginStateChange:function(e,t,n){return Z(ue[se.AddPerson],function(t){var n=J(t,e);return!!te(n)&&t.islands},n)},endStateChange:function(e){return Z({},ee(e,function(e){return{population:e.population+1}}))},emoji:"\ud83d\udc76",finishMessage:function(e){var t=e.islandName;return"a child was born in ".concat(t,"!")},cost:ue[se.AddPerson],validate:J,getDuration:function(){return 20},getName:function(e){return"person"}}),Object(S.a)(le,se.AddDwelling,{text:"build dwelling",emoji:"\ud83c\udfe0",cost:ue[se.AddDwelling],beginStateChange:function(e,t,n){return Z(ue[se.AddDwelling],function(t){var n=Q(t,e);return!!te(n)&&t.islands},n)},endStateChange:function(e){return Z({},ee(e,function(e){return{numDwellings:e.numDwellings+1,bonusPopulation:e.bonusPopulation+5}}))},finishMessage:function(e){var t=e.islandName;return"a dwelling was built in ".concat(t,"!")},validate:Q,getDuration:function(){return 20},getName:function(e){return"dwelling"}}),Object(S.a)(le,se.AddSettlement,{text:"raise settlement",beginStateChange:function(e,t,n){return Z(ue[se.AddSettlement],function(t){var n=$(t,e);return!!te(n)&&t.islands},n)},endStateChange:function(e,t){return Z({},ee(e,function(e){return{hasSettlement:!0}}))},emoji:"\ud83c\udfe0",finishMessage:function(e){var t=e.islandName;return"a settlement was raised in ".concat(t,"!")},cost:ue[se.AddSettlement],validate:$,getDuration:function(){return 40},getName:function(e){return"settlement"}}),Object(S.a)(le,se.AddGarden,{text:"plant garden",beginStateChange:function(e,t,n){return Z(ue[se.AddGarden],function(t){var n=X(t,e);return!!te(n)&&t.islands},n)},endStateChange:function(e){return Z({},ee(e,function(e){return{numGardens:e.numGardens+1}}))},emoji:"\ud83e\udd6c",finishMessage:function(e){var t=e.islandName;return"a garden was planted in ".concat(t,"!")},cost:ue[se.AddGarden],validate:X,getDuration:function(){return 40},getName:function(e){return"garden"}}),Object(S.a)(le,se.AddTemple,{text:"build temple",emoji:"\ud83d\ude4f",beginStateChange:function(e,t,n){return Z(ue[se.AddTemple],function(t){var n=K(t,e);return!!te(n)&&t.islands},n)},endStateChange:function(e){return Z({},ee(e,function(e){return{hasTemple:!0}}))},cost:ue[se.AddGarden],finishMessage:function(e){var t=e.islandName;return"a temple was built in ".concat(t,"!")},validate:K,getDuration:function(){return 100},getName:function(e){return"temple"}}),le),he=function(e){return e[Math.floor(Math.random()*e.length)]},pe=2;function be(e,t){var n=t.population,a=t.resources,r=t.numGardens,o=n>=5,l={wood:x,food:P}[e],i=a.filter(function(e){return e===w.Guano}).length>0;return 0===n?0:a.reduce(function(e,t){var n=A[t]?r:0,a=n>0&&i?2:0;return e+(!T[t]||T[t]&&o?l[t]+n+a:0)},0)}var ve=function(e){return Object.keys(q).reduce(function(t,n){var a=q[n],r=e?e[n]:{};return Object(N.a)({},t,Object(S.a)({},n,Object(N.a)({},a,r)))},{})},Oe=q.Morrigan.name,ye=(ie={},Object(S.a)(ie,se.LaunchOutrigger,2),Object(S.a)(ie,se.LaunchFleet,5),ie),je={day:1,dayOfWeek:1,weekOfYear:1,season:{Winter:"winter",Spring:"spring",Summer:"summer",Harvest:"harvest"}.Rainy,year:1},Ee={islands:Object.keys(q).reduce(function(e,t){return Object(N.a)({},e,Object(S.a)({},t,function(e){return{population:0,hasTemple:!1,hasSettlement:!1,isDiscovered:!1,scatterings:[],resources:q[e].resources,numDwellings:0,numTreasures:0,bonusPopulation:0,numGardens:0}}(t)))},{}),player:{wood:0,food:0,wind:0,energy:0},world:je,progressItems:[]},Se=5,we=5;function Ae(e){var t=e.island,n=t.name,a=t.type,r=t.population,o=t.bonusPopulation,l=t.numTreasures,i=t.numDwellings,c=t.numGardens,s=t.hasSettlement,u=t.hasTemple,d=be("food",t),f=be("wood",t);return m.a.createElement("section",{className:"current-island-info"},m.a.createElement("h3",null,n),"A ",m.a.createElement("b",null,a," island"),m.a.createElement("p",null,m.a.createElement("i",null,L[a])),m.a.createElement("ul",null,m.a.createElement("li",null,m.a.createElement("b",null,function(e){var t=e.hasTemple,n=e.numGardens,a=e.population,r=e.numDwellings;return t&&n===we&&r===Se?W.Advanced:a===I[e.type]?W.Developed:a>=5?W.Burgeoning:W.Undeveloped}(t))),m.a.createElement("li",null,"Providing ",m.a.createElement("b",null,d)," food, ",m.a.createElement("b",null,f)," materials per day"),s?m.a.createElement("li",null,m.a.createElement("b",null,"has settlement")):null,m.a.createElement("li",null,m.a.createElement("b",null,r),"/",I[a]," ",o>0?m.a.createElement("b",{className:"bonus"},"+",o):null," ","population"),m.a.createElement("li",null,m.a.createElement("b",null,l),"/10 treasures"),m.a.createElement("li",null,m.a.createElement("b",null,i),"/5 dwellings"),m.a.createElement("li",null,m.a.createElement("b",null,c),"/5 gardens"),u?m.a.createElement("li",null,m.a.createElement("b",null,"has temple")):null))}var Te=n(124);function Fe(e){var t=e.children,n=e.actionType,a=e.onActionClicked,r=e.hide,o=e.validate,l=ge[n],i=l.emoji,c=l.text,s=o(),u=s.filter(function(e){return e.met}).length===s.length,d=s.length>0?m.a.createElement("ul",{className:"requirements"},s.map(function(e){var t=e.text;return t?m.a.createElement("li",null,t):null})):null;return r?null:m.a.createElement("li",null,i,m.a.createElement(Te.a,{onClick:a,disabled:!u,styles:function(e){return{root:e.isDisabled?{color:y.Disabled}:{}}}},c),m.a.createElement("div",{className:"island-options-details"},t),d)}function Pe(e){var t=e.game,n=e.island,a=e.doAction,r=n.name,o=n.hasSettlement;return m.a.createElement("ul",{className:"island-options measure"},m.a.createElement(Fe,{actionType:se.SpendEnergy,onActionClicked:function(){a(se.SpendEnergy,r,{})},validate:function(){return ge[se.SpendEnergy].validate(t,r,{})}},m.a.createElement("p",null,"Receive a bounty of food and materials from ",r," in exchange for all of your current energy.")),m.a.createElement(Fe,{actionType:se.AddSettlement,hide:o,onActionClicked:function(){a(se.AddSettlement,r,{})},validate:function(){return ge[se.AddSettlement].validate(t,r,{})}},m.a.createElement("p",null,"Raise a settlement on ",r,". A settlement allows new structures to be built and children to be born on the island.")),m.a.createElement(Fe,{hide:!o,actionType:se.AddPerson,onActionClicked:function(){a(se.AddPerson,r,{})},validate:function(){return ge[se.AddPerson].validate(t,r)}},m.a.createElement("p",null,"Cause a child to be born on ",r,". Uses ",m.a.createElement("b",null,"1 food per day")," after the initial cost."),m.a.createElement("p",null,"You need people to explore other islands, upgrade your development level and harvest certain resources. You need at least one person on"," ",r," to get resources from here.")),m.a.createElement(Fe,{hide:!o,actionType:se.AddDwelling,onActionClicked:function(){a(se.AddDwelling,r,{})},validate:function(){return ge[se.AddDwelling].validate(t,r)}},m.a.createElement("p",null,"Build a dwelling on ",r," to house more people on this island. Up to five dwellings can be built.")),m.a.createElement(Fe,{actionType:se.AddGarden,hide:!o,onActionClicked:function(){a(se.AddGarden,r,{})},validate:function(){return ge[se.AddGarden].validate(t,r)}},m.a.createElement("p",null,"Plant a garden on ",r," to receive bonus horticultural resources (",m.a.createElement("b",null,"root vegetables")," and ",m.a.createElement("b",null,"fruit trees"),"). Up to five gardens can be planted on islands with horticultural resources.")),m.a.createElement(Fe,{hide:!o,actionType:se.AddTemple,onActionClicked:function(){a(se.AddTemple,r,{})},validate:function(){return ge[se.AddTemple].validate(t,r)}},m.a.createElement("p",null,"Build a temple to find treasures to increase the prestige of ",r,". Once a temple is built, bonus energy will be received per day.")))}function xe(e){var t=e.island,n=e.islands,a=e.game,r=e.doAction,o=t.name,l=t.neighbours.filter(function(e){return n[e].population<5});return m.a.createElement(m.a.Fragment,null,m.a.createElement("section",{className:"voyage-hints"},m.a.createElement("p",{className:"hint-text measure"},m.a.createElement("h5",null,"Outrigger"),"If the destination island is hospitable, it will be populated with the 2 voyagers."),m.a.createElement("p",{className:"hint-text measure"},m.a.createElement("h5",null,"Fleet"),"If the destination island is hospitable, it will be populated with the 5 voyagers. If there are any dispersible resources on this island, one will be chosen at random and transferred to the destination island.")),m.a.createElement("ul",{className:"voyages"},l.map(function(e,t){var l,i=n[e].isDiscovered,c=o,s=q[c].neighbourDistance[e],u={actionType:se.LaunchOutrigger,isBeginning:!1,toName:e,islandName:c},d={actionType:se.LaunchFleet,isBeginning:!1,toName:e,islandName:c};return m.a.createElement("li",{style:Object(N.a)((l={marginBottom:"1em"},Object(S.a)(l,"marginBottom","1em"),Object(S.a)(l,"paddingTop","1em"),l),t>0?{borderTop:"1px solid ".concat(y.Outline)}:{})},m.a.createElement("h4",null,"Voyage to ",i?e:"an undiscovered land"," -"," ",s," worlds away"," ",i?"(already discovered)":""),m.a.createElement("br",null),m.a.createElement(Fe,{actionType:se.LaunchOutrigger,onActionClicked:function(){r(se.LaunchOutrigger,o,u)},validate:function(){return ge[se.LaunchOutrigger].validate(a,o,u)}}),m.a.createElement(Fe,{actionType:se.LaunchFleet,onActionClicked:function(){r(se.LaunchFleet,o,d)},validate:function(){return ge[se.LaunchFleet].validate(a,o,d)}}))})))}function Ne(e){var t=e.game,n=e.island,a=e.islands,r=e.doAction,o=(e.progressProvider,t.player,t.world,n.type),l=n.name,i=(n.resources,n.isDiscovered),c=m.a.createElement("section",{className:"current-island-options mv2"},m.a.createElement(Pe,{game:t,island:n,doAction:r})),s=m.a.createElement("section",{className:"current-island-expeditions mv2"},m.a.createElement("h4",null,"Voyages from ",l),m.a.createElement(xe,{island:n,islands:a,game:t,doAction:r}));return m.a.createElement("div",{className:"current-island mv2"},m.a.createElement("div",{className:"current-island-header"},m.a.createElement("aside",{className:"current-island-illustration"},m.a.createElement("figure",null,m.a.createElement("img",{src:M[o]}))),m.a.createElement(Ae,{island:n}),m.a.createElement(_,{island:n})),i?c:null,i?s:null)}var ke,Ce=n(65),Be=n(66),De=n.n(Be),Ge={places:[{id:"a",x:80,y:120,name:"A"},{id:"b",x:200,y:100,name:"B",isActive:!0,isBig:!0},{id:"c",x:150,y:250,name:"C",isBig:!0}],paths:[],baseMarkerOptions:{fill:y.Green,fillStyle:"solid",hachureAngle:65,roughness:1,stroke:0,fillWeight:2,bowing:2},activePlaceOptions:{fill:y.Green,stroke:y.Light,strokeWidth:5},inactivePlaceOptions:{},pathOptions:{},sizes:(ke={},Object(S.a)(ke,k,5),Object(S.a)(ke,C,10),Object(S.a)(ke,B,15),Object(S.a)(ke,D,20),Object(S.a)(ke,G,35),ke)};var Le=function(e){var t=Object(N.a)({},Ge,e),n=t.islands,a=t.paths,r=t.baseMarkerOptions,o=t.activePlaceOptions,l=t.inactivePlaceOptions,i=t.lineOptions,c=t.sizes,s=t.currentIsland,u=-40,f=0,g=r,p=["The Pip","Elder","Father"],b=Object(d.useRef)(null);function v(t){var r=De.a.svg(t),d=Ce(t);Object.values(ve(n)).forEach(function(n){if(n.isDiscovered){var a=function(e){var t=e.name,n=e.x,a=e.y,i=e.type,d=e.markerOptions,m=Object(N.a)({},g,t===s?o:l,d);return r.circle(5*n+u,5*a+f,c[i],m)}(n);t.appendChild(a),function(t){d.link("javascript:;").text(t.name).fill(y.Light).x(5*t.x+u+(-1!==p.indexOf(t.name)?25+c[t.type]:0)).y(5*t.y+f+(-1!==p.indexOf(t.name)?-8:c[t.type]/2+1)).font({family:"Open Sans",size:16,anchor:"middle"}).on("click",function(){e.setCurrentIsland(t.name)})}(n)}}),a.forEach(function(e){var a,o,l=Object(h.a)(e,2),c=l[0],s=l[1],u=(a=n[c],o=n[s],r.line(a.x,a.y,o.x,o.y,Object(N.a)({},g,i,{stroke:y.Light})));t.appendChild(u)})}Object(d.useEffect)(function(){v(b.current)},[b.current]);var O=function(){var e=b.current;if(e){for(;e.lastChild;)e.removeChild(e.lastChild);v(e)}},j=Object.entries(n).map(function(e){var t=Object(h.a)(e,2);return t[0],t[1].isDiscovered});return Object(d.useEffect)(O,j),Object(d.useEffect)(O,[s]),m.a.createElement("svg",{ref:b,className:"map-svg"})},Me=n(46),Ie=n(125);function We(e){var t=e.game.progressItems;return m.a.createElement("section",{className:"journeys-container"},t.length>0?m.a.createElement("ul",null,t.map(function(e){return m.a.createElement(Re,e)})):null)}function Re(e){var t=e.name,n=(e.task,e.progress),a=e.duration,r=e.actionType,o=e.destName,l=ge[r],i=l.emoji,c=l.text,s=l.hidden,u=Math.round(n/a*100),d=r===se.LaunchFleet||r===se.LaunchOutrigger?t:"";return s?null:m.a.createElement("li",{key:"".concat(r,"-").concat(o)},m.a.createElement(Ie.a,{className:"progress-status-item",label:"".concat(i," ").concat(c," (").concat(u,"%)"),description:d,percentComplete:n/a}))}var Ye=n(119),Ve=n(11),qe=n(25);function _e(e){var t=e.loadSaveProvider,n=e.game,a=t.loadState,r=t.serializeState,o=Object(d.useState)(!1),l=Object(h.a)(o,2),i=l[0],c=l[1],s=Object(d.useRef)();Object(d.useEffect)(function(){if(i&&s.current){var e=s.current;e.value=r(n),e.focus()}},[i&&s.current]);return m.a.createElement(m.a.Fragment,null,m.a.createElement(Ye.a,{isOpen:i,onDismiss:function(){c(!1)},type:Ve.a.smallFixedNear,headerText:"Load and save"},m.a.createElement("p",null,"Copy the save file below to capture your current game, or paste in a save file to load a previous game."),m.a.createElement("textarea",{className:"savefile-textarea",ref:s}),m.a.createElement("p",null,m.a.createElement(Te.a,{onClick:function(){!function(){var e=s.current;a(e.value)}()}},"load saved game"))),m.a.createElement(Te.a,{onClick:function(){c(!0)}},"load and save games"))}var ze=1e3;function He(e){var t=Object(d.useState)(Ee),n=Object(h.a)(t,2),a=n[0],r=n[1],o=Object(d.useState)({"wood\u0394":0,"food\u0394":0,"energy\u0394":0,"wind\u0394":0}),l=Object(h.a)(o,2),i=l[0],c=l[1],s={add:function(e){return function(t){var n=[].concat(Object(z.a)(t.progressItems),[e]);return Object(N.a)({},t,{progressItems:n})}},tick:function(e,t){return function(n){var a=n.progressItems,r=n.player.wind,o=n;a.filter(function(e){return 0===e.progress}).forEach(function(t){o=e(t)(o)}),a.filter(function(e){return e.progress>=e.duration}).forEach(function(e){o=t(e)(o)});var l=a.filter(function(e){return e.progress<e.duration}).map(function(e){e.duration;var t=e.actionType,n=t===se.LaunchFleet||t===se.LaunchOutrigger,a=e.progress+1+(n?.05*r:0);return Object(N.a)({},e,{progress:a>e.duration?e.duration:a})});return Object(N.a)({},o,{progressItems:l})}}},u={add:function(e){return r(s.add(e))},tick:s.tick},m=e.clearOneMessage,f=e.postMessage,g={loadState:function(e){return function(t){try{var n=qe.decodeBase64(e),a=qe.decompress(n);return JSON.parse(a)}catch(r){return console.error("Error loading game :("),t}}},serializeState:function(e){try{var t=JSON.stringify(e),n=qe.compress(t);return qe.encodeBase64(n)}catch(a){console.error("Error creating save file :(")}}},p={loadState:function(e){return r(g.loadState(e))},serializeState:g.serializeState};Object(d.useEffect)(function(){O()},[]);var b=function(e){var t=e.actionType,n=e.islandName,a=e.task,r=ge[t];return f(r.finishMessage(e)),r.endStateChange(n,a)},v=function(e){var t=e.actionType,n=e.islandName,a=e.task;return ge[t].beginStateChange(n,a)},O=function(){return y(se.LaunchFleet,"Beginning",{toName:Oe,isBeginning:!0,actionType:se.LaunchFleet})},y=function(e,t,n){var r=ge[e],o=r.getDuration,l=r.getName,i=n.toName&&a.islands[n.toName].isDiscovered;u.add({task:n,actionType:e,duration:o(n),name:l(n),islandName:t,progress:0,destinationIsDiscovered:i})};return{gameState:a,doAction:y,tick:function(){r(function(e){var t,n=ce(),a=(t=function(e){return c(e)},function(e){var n=e.player,a=e.islands,r=n.wood,o=n.food,l=n.energy,i=n.wind,c=0,s=0,u=1,d=Math.floor(21*Math.random())-10;Object.entries(a).filter(function(e){var t=Object(h.a)(e,2),n=(t[0],t[1]);return n.isDiscovered&&n.population>0}).forEach(function(e){var t=Object(h.a)(e,2),n=(t[0],t[1]);c+=be("food",n),s+=be("wood",n),c-=n.population,u+=n.hasTemple?1:0}),t({"food\u0394":c,"wood\u0394":s,"energy\u0394":u,"wind\u0394":d});var m=r+s,f=o+c,g=l+u,p=Math.min(100,i+d);return Object(N.a)({},e,{player:Object(N.a)({},n,{wood:m<0?0:m,food:f<0?0:f,energy:g<0?0:g,wind:p<0?0:p})})}),r=e;return r=n(r=u.tick(v,b)(r=a(r)))}),m()},deltas:i,newGame:O,progressProvider:u,loadSaveProvider:p}}var Ue=n(67);function Je(e){var t=e.qty,n=e.\u0394,a=e.text,r=Object(Me.b)({qty:t,from:{qty:t-n},config:{duration:ze}});return m.a.createElement("li",null,m.a.createElement("h4",{className:"game-meter-number"},m.a.createElement(Me.a.span,null,r.qty.interpolate(function(e){var t=Math.round(e);return t>=1e3?Ue(t).format("0.0a"):t}))," ",function(e){return 0===e?null:m.a.createElement("span",{className:"game-meter-delta",style:{color:e>0?y.Green:"red"}},"".concat(e>0?"+":"").concat(e))}(n))," ",a)}function Qe(e){var t=e.deltas,n=e.player,a=n.wood,r=n.food,o=n.wind,l=n.energy,i=t.wood\u0394,c=t.food\u0394,s=t.energy\u0394,u=t.wind\u0394;return m.a.createElement("section",{className:"game-meters-container"},m.a.createElement("ul",{className:"game-meters"},m.a.createElement(Je,{qty:r,"\u0394":c,text:"food \ud83e\udd5d"}),m.a.createElement(Je,{qty:a,"\u0394":i,text:"materials \u2692\ufe0f"}),m.a.createElement(Je,{qty:l,"\u0394":s,text:"energy \u26a1"}),m.a.createElement(Je,{qty:o,"\u0394":u,text:"wind \ud83d\udca8"})))}function $e(e){var t=e.messaging.messages;return m.a.createElement("section",{className:"messages-container"},m.a.createElement("ul",null,t.map(function(e){var t=e.text;return m.a.createElement("li",{key:t},t)})))}function Ke(e){var t=e.world,n=t.day,a=(t.dayOfWeek,t.weekOfYear),r=t.year;return m.a.createElement("section",{className:"calendar-container"},m.a.createElement("p",null,"day ".concat(n,", year ").concat(r," (week ").concat(a,"/52)")))}var Xe="0.7.2",Ze=ze;Object(p.D)(E),Object(p.z)({typography:{families:{default:"Open Sans"}},fonts:{large:{fontFamily:"Open Sans"},xLarge:{fontFamily:"Open Sans"},xxLarge:{fontFamily:"Open Sans"},superLarge:{fontFamily:"Open Sans"},mega:{fontFamily:"Open Sans"}},palette:{themePrimary:"#5ba9ff",themeLighterAlt:"#04070a",themeLighter:"#0f1b29",themeLight:"#1c334d",themeTertiary:"#376699",themeSecondary:"#5196e0",themeDarkAlt:"#6cb3ff",themeDark:"#83bfff",themeDarker:"#a4d0ff",neutralLighterAlt:"#111157",neutralLighter:"#111155",neutralLight:"#101052",neutralQuaternaryAlt:"#0f0f4c",neutralQuaternary:"#0f0f49",neutralTertiaryAlt:"#0e0e46",neutralTertiary:"#f6f5f5",neutralSecondary:"#f8f6f6",neutralPrimaryAlt:"#f9f8f8",neutralPrimary:"#f3f1f1",neutralDark:"#fcfbfb",black:"#fdfdfd",white:"#121258"}});var et=function(){var e=function(){var e=Object(d.useState)([]),t=Object(h.a)(e,2),n=t[0],a=t[1];return{postMessage:function(e){return a(function(t){return[].concat(Object(z.a)(t),[{live:10,text:e}])})},messages:n,clearOneMessage:function(){return a(function(e){return e.filter(function(e){return e.live>0}).map(function(e){return Object(N.a)({},e,{live:e.live-1})})})}}}(),t=He(e),n=t.gameState,a=t.tick,r=t.doAction,o=t.deltas,l=t.loadSaveProvider,i=n.world,c=n.player,s=Object(d.useState)(Oe),u=Object(h.a)(s,2),f=u[0],g=u[1];!function(e,t){var n=Object(d.useRef)();Object(d.useEffect)(function(){n.current=e},[e]),Object(d.useEffect)(function(){if(null!==t){var e=setInterval(function(){n.current()},t);return function(){return clearInterval(e)}}},[t])}(a,Ze);var p=ve(n.islands);return m.a.createElement(b.a,null,m.a.createElement("main",{className:"game"},m.a.createElement("aside",{className:"left"},m.a.createElement("h2",{className:"title title-subtitle"},"sailsongs of"),m.a.createElement("h1",{className:"title title-title",title:Xe},"scattershell"),m.a.createElement("div",{className:"fixed"},m.a.createElement(_e,{game:n,loadSaveProvider:l}),m.a.createElement(Qe,{deltas:o,player:c}),m.a.createElement(We,{game:n}),m.a.createElement($e,{messaging:e}),m.a.createElement(Ke,{world:i})),m.a.createElement("section",{style:{marginTop:"8em"}},m.a.createElement(Le,{islands:p,currentIsland:f,setCurrentIsland:g}))),m.a.createElement("section",{className:"right"},m.a.createElement(Ne,{game:n,player:c,island:p[f],islands:p,doAction:r}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));g.a.render(m.a.createElement(et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},38:function(e,t,n){},72:function(e,t,n){e.exports=n(101)},77:function(e,t,n){},92:function(e,t){},94:function(e,t){}},[[72,1,2]]]);
//# sourceMappingURL=main.d794cca5.chunk.js.map