(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{238:function(e,t,a){"use strict";a.r(t);var n,l,r,o,i,s=a(0),c=a.n(s),u=a(84),d=a.n(u),h=(a(92),a(43)),m=a(1),b=a(2),p=a(3),f=(a(25),{Shellfish:"shellfish",Fish:"fish",Pigs:"pigs",Birds:"birds",BushFood:"bush food",Coconuts:"coconuts",RootVegetables:"root vegetables",PreciousShells:"precious shells",FreshWater:"fresh water",Flax:"flax",Bamboo:"bamboo",SturdyWood:"sturdy wood",FruitTrees:"fruit trees",Guano:"guano"}),O=(n={},Object(m.a)(n,f.Shellfish,1),Object(m.a)(n,f.Fish,2),Object(m.a)(n,f.Pigs,1),Object(m.a)(n,f.Birds,1),Object(m.a)(n,f.BushFood,2),Object(m.a)(n,f.Coconuts,1),Object(m.a)(n,f.RootVegetables,2),Object(m.a)(n,f.PreciousShells,0),Object(m.a)(n,f.FreshWater,2),Object(m.a)(n,f.Flax,0),Object(m.a)(n,f.Bamboo,1),Object(m.a)(n,f.SturdyWood,0),Object(m.a)(n,f.FruitTrees,1),Object(m.a)(n,f.Guano,0),n),g=(l={},Object(m.a)(l,f.Shellfish,1),Object(m.a)(l,f.Fish,0),Object(m.a)(l,f.Pigs,1),Object(m.a)(l,f.Birds,1),Object(m.a)(l,f.BushFood,0),Object(m.a)(l,f.Coconuts,1),Object(m.a)(l,f.RootVegetables,0),Object(m.a)(l,f.PreciousShells,2),Object(m.a)(l,f.FreshWater,0),Object(m.a)(l,f.Flax,2),Object(m.a)(l,f.Bamboo,1),Object(m.a)(l,f.SturdyWood,2),Object(m.a)(l,f.FruitTrees,1),Object(m.a)(l,f.Guano,1),l),j="rocky",E="guano",v="small",S="medium",y="large",T=(r={},Object(m.a)(r,j,"You are disappointed to find an inhospitable outcrop of rocks in the middle of the ocean."),Object(m.a)(r,E,"This place is covered in guano, hospitable only to the many gulls that dwell here."),Object(m.a)(r,v,"You look out upon a modest but hospitable island."),Object(m.a)(r,S,"You are relieved to find a plentiful and hospitable island."),Object(m.a)(r,y,"You are glad to the gods to find a massive volcanic island, capable of sustaining a large population."),r),F=(o={},Object(m.a)(o,j,"/island_types/rock.png"),Object(m.a)(o,E,"/island_types/gull3.png"),Object(m.a)(o,v,"/island_types/shells.png"),Object(m.a)(o,S,"/island_types/coconuts.png"),Object(m.a)(o,y,"/island_types/volcano.png"),o),P=(i={},Object(m.a)(i,j,0),Object(m.a)(i,E,25),Object(m.a)(i,v,100),Object(m.a)(i,S,500),Object(m.a)(i,y,1e3),i),B={id:"1",name:"Birdstar",trueName:"Artheenkwas",isDiscovered:!0,x:30,y:30,type:E,resources:[],neighbours:["Great Ark","Shellcove","Holystone"],neighbourDistance:{"Great Ark":359,Shellcove:28,Holystone:62},population:0,numTreasures:0,numDwellings:0,hasTemple:!1},k="undeveloped",w="burgeoning",C="developed",x="highly developed",A="advanced",M=function(e){return 10===e.numTreasures&&e.hasTemple?A:e.hasTemple||e.numTreasures>5?x:e.population===P[e.type]?C:e.population>5?w:k};function I(e){var t=Object(b.a)({},B,e),a=t,n=a.population<P[a.type]&&t.food>=50,l=a.numDwellings<5&&t.wood>=100,r=Object(s.useState)(!1),o=Object(p.a)(r,2),i=o[0],u=o[1];return c.a.createElement("div",{className:"current-island mv2"},c.a.createElement("div",{className:"current-island-header"},c.a.createElement("aside",{className:"current-island-illustration"},c.a.createElement("figure",null,c.a.createElement("img",{src:F[a.type]}))),c.a.createElement("section",{className:"current-island-info measure"},c.a.createElement("h3",null,a.name),"A ",c.a.createElement("b",null,a.type," island"),c.a.createElement("p",null,c.a.createElement("i",null,T[a.type])),c.a.createElement("ul",null,c.a.createElement("li",null,"Development level: ",c.a.createElement("b",null,M(a))),c.a.createElement("li",null,"Population: ",c.a.createElement("b",null,a.population),"/",P[a.type]),c.a.createElement("li",null,"Treasures: ",c.a.createElement("b",null,a.numTreasures),"/10"),c.a.createElement("li",null,"Dwellings: ",c.a.createElement("b",null,a.numDwellings),"/5"),c.a.createElement("li",null,"Has temple: ",c.a.createElement("b",null,a.hasTemple?"yes":"no"))))),c.a.createElement("section",null,c.a.createElement("h3",null,"Resources on this island:"),c.a.createElement("ul",null,a.resources.map(function(e){return c.a.createElement("li",null,c.a.createElement("b",null,e),c.a.createElement("br",null),c.a.createElement("i",null,"(",O[e]," food, ",g[e]," ","materials per tick)"))}))),c.a.createElement("section",{className:"current-island-options mv2"},c.a.createElement("ul",{className:"island-options measure"},c.a.createElement("li",null,c.a.createElement("a",{href:"javascript:;",onClick:function(){n&&t.addPerson(a.name)},disabled:!n,className:"island-options-link"},"\ud83d\udc76 add person"),c.a.createElement("div",{className:"island-options-details"},"Add a person to this island's population. Costs ",c.a.createElement("b",null,"50 food")," ",!t.food>=50&&"(not enough)")),c.a.createElement("li",null,c.a.createElement("a",{href:"javascript:;",onClick:function(){l&&t.addDwelling(a.name)},className:"island-options-link"},"\ud83c\udfe0 build dwelling"),c.a.createElement("div",{className:"island-options-details"},"Build a dwelling to house more people on this island. Up to five dwellings can be built on this island.",c.a.createElement("br",null),"Costs ",c.a.createElement("b",null,"100 materials")," ",!t.wood>=100&&"(not enough)")),c.a.createElement("li",null,c.a.createElement("a",{href:";",className:"island-options-link"},"\ud83d\ude4f build temple"),c.a.createElement("div",{className:"island-options-details"},c.a.createElement("p",null,"Build a temple to find treasures to increase the prestige of the island. Can only be built on a medium or larger island."),c.a.createElement("p",null,"Building a temple will bring forth a boon or burden for this island and its descendants."))))),c.a.createElement("section",{className:"current-island-expeditions mv2"},c.a.createElement("h4",null,"Unexplored Islands"),0===t.neighbours.length?c.a.createElement("i",null,"There are no islands nearby to explore."):c.a.createElement(c.a.Fragment,null,c.a.createElement("i",null,"The wind and sea whisper rumors of nearby islands waiting to be discovered."),i?c.a.createElement("ul",null,t.neighbours.filter(function(e){return!e.discovered}).map(function(e){return c.a.createElement("li",null,"Launch expedition to ",c.a.createElement("b",null,e)," -",c.a.createElement("i",null," ",t.neighbourDistance[e]," km away"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:"javascript:;",onClick:function(){return t.launchExpedition(t,e,"outrigger")}},"Launch outrigger")," ","(costs 25 resources, 50 food, risks 2 people)"),c.a.createElement("li",null,c.a.createElement("a",{href:"javascript:;",onClick:function(){return t.launchExpedition(t.name,e,"smallFleet")}},"Launch small fleet")," ","(costs 50 resources, 250 food, risks 5 people)"),c.a.createElement("li",null,c.a.createElement("a",{href:"javascript:;",onClick:function(){return t.launchExpedition(t.name,e,"largeFleet")}},"Launch large fleet")," ","(costs 100 resources, 500 food, risks 10 people)")))})):c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement("a",{href:"javascript:;",onClick:function(){return u(!0)}},"Show expedition choices")))))}function G(e){Object(b.a)({},B,e);return c.a.createElement(c.a.Fragment,null)}var N=[["Morrigan","The Crook",16],["The Crook","Morrigan",16],["Morrigan","Great Arc",20],["Great Arc","Morrigan",20],["Fivestone","The Crook",14],["The Crook","Fivestone",14],["Shell Cove","Great Arc",12],["Great Arc","Shell Cove",12],["The Splinter","Great Arc",25],["Great Arc","The Splinter",25],["The Pip","The Splinter",15],["The Splinter","The Pip",15],["Afallon","The Splinter",22],["The Splinter","Afallon",22],["Brightreach","The Splinter",23],["The Splinter","Brightreach",23],["Afallon","The Pip",7],["The Pip","Afallon",7],["Brightreach","The Pip",13],["The Pip","Brightreach",13],["Birdstar","The Pip",25],["The Pip","Birdstar",25],["Brightreach","Afallon",12],["Afallon","Brightreach",12],["Old Crone","Birdstar",20],["Birdstar","Old Crone",20],["Gull's Rest","Shell Cove",22],["Shell Cove","Gull's Rest",22],["Mother","Shell Cove",28],["Shell Cove","Mother",28],["Elder Island","Shell Cove",30],["Shell Cove","Elder Island",30],["Younger Island","Mother",15],["Mother","Younger Island",15],["Father","Mother",10],["Mother","Father",10],["Twinstone","Mother",11],["Mother","Twinstone",11],["Obsidian Point","Gull's Rest",13],["Gull's Rest","Obsidian Point",13],["Last Hope","Obsidian Point",30],["Obsidian Point","Last Hope",30],["Island of Pearls","Obsidian Point",29],["Obsidian Point","Island of Pearls",29],["Island of Pearls","Last Hope",9],["Last Hope","Island of Pearls",9]],D=function(e){return N.filter(function(t){var a=Object(p.a)(t,3),n=a[0];a[1],a[2];return e===n}).reduce(function(e,t){var a=Object(p.a)(t,3),n=(a[0],a[1]),l=a[2];return Object(b.a)({},e,Object(m.a)({},n,l))},{})};console.log(D("Last Hope"));var W,R=function(e,t,a,n,l){return{id:e,name:e,x:a,y:n,type:t,resources:l.map(function(e){return f[e]}),neighbours:Object.keys(D(e)),neighbourDistance:D(e)}},L={"Shell Cove":R("Shell Cove",v,63,49,[]),"Great Arc":R("Great Arc",y,56,58,[]),Morrigan:R("Morrigan",S,46,75,["Fish","RootVegetables","BushFood","Flax"]),"The Crook":R("The Crook",v,34,87,["Shellfish","Fish","PreciousShells"]),Fivestone:R("Fivestone",j,23,93,[]),"Elder Island":R("Elder Island",j,87,55,[]),"Younger Island":R("Younger Island",E,95,48,["Guano","Birds"]),Mother:R("Mother",S,86,60,["Flax","Birds","PreciousShells","BushFood"]),Father:R("Father",S,95,60,["Bamboo","Fish","Pigs","SturdyWood"]),Twinstone:R("Twinstone",j,92,70,[]),Birdstar:R("Birdstar",E,40,30,["Guano","Birds"]),"Last Hope":R("Last Hope",y,97,8,["Shellfish","Fish","Birds","StudyWood","FreshWater"]),"Island of Pearls":R("Island of Pearls",v,98,16,["PreciousShells","Shellfish","Coconuts"]),"Obsidian Point":R("Obsidian Point",j,73,19,[]),"Gull's Rest":R("Gull's Rest",E,70,30,["Guano","Birds"]),"Old Crone":R("Old Crone",S,40,10,["Coconuts","RootVegetables","Pigs","BushFood"]),"The Splinter":R("The Splinter",j,33,55,[]),Afallon:R("Afallon",y,14,45,["FruitTrees","FreshWater","SturdyWood","Birds","Pigs"]),"The Pip":R("The Pip",v,22,47,["FruitTrees","Fish","SturdyWood"]),Brightreach:R("Brightreach",S,23,35,["PreciousShells","FreshWater","Flax","Shellfish"])},H=a(85),Y=a(86),V=a.n(Y),_={Deep:"#121258",Med:"#5ba9ff",Shallow:"#7ccbff",Light:"#f3f1f1",Outline:"#000d16"},z=(a(101),a(102),{places:[{id:"a",x:80,y:120,name:"A"},{id:"b",x:200,y:100,name:"B",isActive:!0,isBig:!0},{id:"c",x:150,y:250,name:"C",isBig:!0}],paths:[],baseMarkerOptions:{stroke:_.Outline,fill:_.Outline,hachureAngle:65,roughness:1.5},activePlaceOptions:{fill:_.Outline,stroke:_.Outline},inactivePlaceOptions:{},pathOptions:{},sizes:(W={},Object(m.a)(W,j,5),Object(m.a)(W,E,10),Object(m.a)(W,v,15),Object(m.a)(W,S,20),Object(m.a)(W,y,35),W)});var J=function(e){var t=Object(s.useRef)(null);function a(t){var a=V.a.svg(t),n=H(t),l=Object(b.a)({},z,e),r=l.places,o=l.paths,i=l.baseMarkerOptions,s=l.activePlaceOptions,c=l.inactivePlaceOptions,u=l.lineOptions,d=l.sizes,h=l.currentIsland,m=r,f=i,O=["The Pip","Elder Island"];Object.values(m).forEach(function(l){if(l.isDiscovered){var r=function(e){var t=e.name,n=e.x,l=e.y,r=e.type,o=e.markerOptions,i=Object(b.a)({},f,t===h?s:c,o);return a.circle(5*n-25,5*l-20,d[r],i)}(l);t.appendChild(r),function(t){n.link("javascript:;").text(t.name).fill(_.Outline).x(5*t.x-25+(-1!==O.indexOf(t.name)?45:0)).y(5*t.y-20+(-1!==O.indexOf(t.name)?-8:d[t.type]/2)).font({size:14,anchor:"middle"}).on("click",function(){e.setCurrentIsland(t.name)})}(l)}}),o.forEach(function(e){var n,l,r=Object(p.a)(e,2),o=r[0],i=r[1],s=(n=m[o],l=m[i],a.line(n.x,n.y,l.x,l.y,Object(b.a)({},f,u,{stroke:_.Light})));t.appendChild(s)})}return Object(s.useEffect)(function(){a(t.current)},[t.current]),c.a.createElement("svg",{ref:t,className:"map-svg"})},U={population:0,hasTemple:!1,isDiscovered:!1,boonsAndBurdens:[],numDwellings:0,numTreasures:0};var $=function(){var e=null,t=Object(s.useState)(0),a=Object(p.a)(t,2),n=a[0],l=a[1],r=Object(s.useState)(0),o=Object(p.a)(r,2),i=o[0],u=o[1],d=Object(s.useState)(0),f=Object(p.a)(d,2),j=f[0],E=f[1],v=Object(s.useState)(0),S=Object(p.a)(v,2),y=S[0],T=S[1],F=Object(s.useState)(0),P=Object(p.a)(F,2),B=P[0],k=P[1],w=Object(s.useState)([]),C=Object(p.a)(w,2),x=C[0],A=C[1],M=Object(s.useState)(Object.keys(L).reduce(function(e,t){return Object(b.a)({},e,Object(m.a)({},t,U))},{})),N=Object(p.a)(M,2),D=N[0],W=N[1],R=Object(s.useState)("Morrigan"),H=Object(p.a)(R,2),Y=H[0],V=H[1],_=function(){return Object.entries(D).filter(function(e){var t=Object(p.a)(e,2);return t[0],t[1].isDiscovered})},z=Object.keys(L).reduce(function(e,t){return Object(b.a)({},e,Object(m.a)({},t,Object(b.a)({},L[t],D[t])))},{});Object(s.useEffect)(function(){W(Object(b.a)({},D,{Morrigan:Object(b.a)({},D.Morrigan,{isDiscovered:!0})}))},[]);var $=function(e){E(j-e)},q=function(e){u(j-e)},K=function(){if(4===B||9===B){_().forEach(function(e){var t=Object(p.a)(e,2),a=t[0];t[1],E(j+z[a].resources.reduce(function(e,t){return e+O[t]},0)),u(i+z[a].resources.reduce(function(e,t){return e+g[t]},0))}),T(y+1);var e=Math.floor(21*Math.random())-10,t=n+e;l(t<0?0:t>=100?100:t)}B%3===0&&_().filter(function(e){var t=Object(p.a)(e,2);return t[0],t[1].isFoodBoosted}).forEach(function(){E(j+1)});var a=x.filter(function(e){return e.progress>=e.duration});Array.prototype.forEach(function(e){e.action()},a);var r=x.filter(function(e){return e.progress<e.duration});A(r.map(function(e){return Object(b.a)({},e,{progress:e.progress+=1})})),k(B>=9?0:B+1)};Object(s.useEffect)(function(){return e=setInterval(K,250),function(){clearInterval(e)}});var Q=Object(s.useState)(Object.keys(L)),X=Object(p.a)(Q,2),Z=X[0],ee=X[1];return c.a.createElement("main",{className:"game"},c.a.createElement("aside",{className:"left"},c.a.createElement("h2",{className:"title title-subtitle"},"sailsongs of"),c.a.createElement("h1",{className:"title title-title"},"scattershell"),c.a.createElement("div",null,"version 0.4"),c.a.createElement("div",{className:"game-meters"},c.a.createElement("section",null,c.a.createElement("h3",null,"energy"),c.a.createElement("h4",{className:"energy-meter"},y)),c.a.createElement("section",null,c.a.createElement("h3",null,"total resources"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("b",null,i)," materials"),c.a.createElement("li",null,c.a.createElement("b",null,j)," food"),c.a.createElement("li",null,c.a.createElement("b",null,n)," wind")))),c.a.createElement("section",null,c.a.createElement(J,{places:z,currentIsland:Y,setCurrentIsland:V}))),c.a.createElement("section",{className:"right"},c.a.createElement("br",null),c.a.createElement(G,null),c.a.createElement("br",null),c.a.createElement(I,Object.assign({},z[Y],{launchExpedition:function(e,t,a){"outRigger"===a&&(q(25),$(50)),"smallFleet"===a&&(q(50),$(250)),"largeFleet"===a&&(q(100),$(500));var n=100*e.neighbourDistance[t],l="Expedition from ".concat(e.name," to ").concat(t);A([].concat(Object(h.a)(x),[{duration:n,name:l,action:function(){ee([].concat(Object(h.a)(Z),[t]))}}]))},addPerson:function(e){W(Object(b.a)({},D,Object(m.a)({},e,Object(b.a)({},D[e],{population:D[e].population+1})))),$(50)},addDwelling:function(e){W(Object(b.a)({},D,Object(m.a)({},e,Object(b.a)({},D[e],{numDwellings:D[e].numDwellings+1})))),q(100)},food:j,wood:i}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(c.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},25:function(e,t,a){},87:function(e,t,a){e.exports=a(238)},92:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.517ee179.chunk.js.map