(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(26)},16:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n,l,r,o,s,i=a(0),c=a.n(i),u=a(7),d=a.n(u),h=(a(16),a(5)),m=a(1),b=a(2),p=a(3),f=(a(4),{Shellfish:"shellfish",Fish:"fish",Pigs:"pigs",Birds:"birds",BushFood:"bush food",Coconuts:"coconuts",RootVegetables:"root vegetables",PreciousShells:"precious shells",FreshWater:"fresh water",Flax:"flax",Bamboo:"bamboo",SturdyWood:"sturdy wood",FruitTrees:"fruit trees",Guano:"guano"}),O=(n={},Object(m.a)(n,f.Shellfish,1),Object(m.a)(n,f.Fish,2),Object(m.a)(n,f.Pigs,1),Object(m.a)(n,f.Birds,1),Object(m.a)(n,f.BushFood,2),Object(m.a)(n,f.Coconuts,1),Object(m.a)(n,f.RootVegetables,2),Object(m.a)(n,f.PreciousShells,0),Object(m.a)(n,f.FreshWater,2),Object(m.a)(n,f.Flax,0),Object(m.a)(n,f.Bamboo,1),Object(m.a)(n,f.SturdyWood,0),Object(m.a)(n,f.FruitTrees,1),Object(m.a)(n,f.Guano,0),n),g=(l={},Object(m.a)(l,f.Shellfish,1),Object(m.a)(l,f.Fish,0),Object(m.a)(l,f.Pigs,1),Object(m.a)(l,f.Birds,1),Object(m.a)(l,f.BushFood,0),Object(m.a)(l,f.Coconuts,1),Object(m.a)(l,f.RootVegetables,0),Object(m.a)(l,f.PreciousShells,2),Object(m.a)(l,f.FreshWater,0),Object(m.a)(l,f.Flax,2),Object(m.a)(l,f.Bamboo,1),Object(m.a)(l,f.SturdyWood,2),Object(m.a)(l,f.FruitTrees,1),Object(m.a)(l,f.Guano,1),l),E="rocky",j="guano",v="small",T="medium",S="large",y=(r={},Object(m.a)(r,E,"You are disappointed to find an inhospitable outcrop of rocks in the middle of the ocean."),Object(m.a)(r,j,"This place is covered in guano, hospitable only to the many gulls that dwell here."),Object(m.a)(r,v,"You look out upon a modest but hospitable island."),Object(m.a)(r,T,"You are relieved to find a plentiful and hospitable island."),Object(m.a)(r,S,"You are glad to the gods to find a massive volcanic island, capable of sustaining a large population."),r),w=(o={},Object(m.a)(o,E,"/island_types/rock.png"),Object(m.a)(o,j,"/island_types/gull3.png"),Object(m.a)(o,v,"/island_types/shells.png"),Object(m.a)(o,T,"/island_types/coconuts.png"),Object(m.a)(o,S,"/island_types/volcano.png"),o),F=(s={},Object(m.a)(s,E,0),Object(m.a)(s,j,25),Object(m.a)(s,v,100),Object(m.a)(s,T,500),Object(m.a)(s,S,1e3),s),B={id:"1",name:"Birdstar",trueName:"Artheenkwas",isDiscovered:!0,x:30,y:30,type:j,resources:[],neighbours:["Great Ark","Shellcove","Holystone"],neighbourDistance:{"Great Ark":359,Shellcove:28,Holystone:62},population:0,numTreasures:0,numDwellings:0,hasTemple:!1},P="undeveloped",k="burgeoning",C="developed",x="highly developed",A="advanced",I=function(e){return 10===e.numTreasures&&e.hasTemple?A:e.hasTemple||e.numTreasures>5?x:e.population===F[e.type]?C:e.population>5?k:P};function M(e){var t=Object(b.a)({},B,e),a=t,n=a.population<F[a.type]&&t.food>=50,l=a.numDwellings<5&&t.wood>=100,r=Object(i.useState)(!1),o=Object(p.a)(r,2),s=o[0],u=o[1];return c.a.createElement("div",{className:"current-island mv2"},c.a.createElement("div",{className:"current-island-header"},c.a.createElement("aside",{className:"current-island-illustration"},c.a.createElement("figure",null,c.a.createElement("img",{src:w[a.type]}))),c.a.createElement("section",{className:"current-island-info measure"},c.a.createElement("h3",null,a.name),"A ",c.a.createElement("b",null,a.type," island"),c.a.createElement("p",null,c.a.createElement("i",null,y[a.type])),c.a.createElement("ul",{style:{fontSize:".8em"}},c.a.createElement("li",null,"Development level: ",c.a.createElement("b",null,I(a))),c.a.createElement("li",null,"Population: ",c.a.createElement("b",null,a.population),"/",F[a.type]),c.a.createElement("li",null,"Treasures: ",c.a.createElement("b",null,a.numTreasures),"/10"),c.a.createElement("li",null,"Dwellings: ",c.a.createElement("b",null,a.numDwellings),"/5"),c.a.createElement("li",null,"Has temple: ",c.a.createElement("b",null,a.hasTemple?"yes":"no"))),"Resources on this island:",c.a.createElement("ul",{style:{fontSize:".8em"}},a.resources.map(function(e){return c.a.createElement("li",null,c.a.createElement("b",null,e),c.a.createElement("br",null),c.a.createElement("i",null,"(",O[e]," food, ",g[e]," ","materials per tick)"))})))),c.a.createElement("section",{className:"current-island-options mv2"},c.a.createElement("ul",{className:"island-options measure"},c.a.createElement("li",null,c.a.createElement("a",{href:"javascript:;",onClick:function(){n&&t.addPerson(a.name)},disabled:!n,className:"island-options-link"},"add person"),c.a.createElement("div",{className:"island-options-details"},"Add a person to this island's population. Costs ",c.a.createElement("b",null,"50 food")," ",!t.food>=50&&"(not enough)")),c.a.createElement("li",null,c.a.createElement("a",{href:"javascript:;",onClick:function(){l&&t.addDwelling(a.name)},className:"island-options-link"},"build dwelling"),c.a.createElement("div",{className:"island-options-details"},"Build a dwelling to house more people on this island. Up to five dwellings can be built on this island.",c.a.createElement("br",null),"Costs ",c.a.createElement("b",null,"100 materials")," ",!t.wood>=100&&"(not enough)")),c.a.createElement("li",null,c.a.createElement("a",{href:";",className:"island-options-link"},"build temple"),c.a.createElement("div",{className:"island-options-details"},c.a.createElement("p",null,"Build a temple to find treasures to increase the prestige of the island. Can only be built on a medium or larger island."),c.a.createElement("p",null,"Building a temple will bring forth a boon or burden for this island and its descendants."))))),c.a.createElement("section",{className:"current-island-expeditions mv2"},c.a.createElement("h4",null,"Unexplored Islands"),0===t.neighbours.length?c.a.createElement("i",null,"There are no islands nearby to explore."):c.a.createElement(c.a.Fragment,null,c.a.createElement("i",null,"The wind and sea whisper rumors of nearby islands waiting to be discovered."),s?c.a.createElement("ul",null,t.neighbours.filter(function(e){return!e.discovered}).map(function(e){return c.a.createElement("li",null,"Launch expedition to ",c.a.createElement("b",null,e)," -",c.a.createElement("i",null," ",t.neighbourDistance[e]," km away"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:"javascript:;",onClick:function(){return t.launchExpedition(t,e,"outrigger")}},"Launch outrigger")," ","(costs 25 resources, 50 food, risks 2 people)"),c.a.createElement("li",null,c.a.createElement("a",{href:"javascript:;",onClick:function(){return t.launchExpedition(t.name,e,"smallFleet")}},"Launch small fleet")," ","(costs 50 resources, 250 food, risks 5 people)"),c.a.createElement("li",null,c.a.createElement("a",{href:"javascript:;",onClick:function(){return t.launchExpedition(t.name,e,"largeFleet")}},"Launch large fleet")," ","(costs 100 resources, 500 food, risks 10 people)")))})):c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement("a",{href:"javascript:;",onClick:function(){return u(!0)}},"Show expedition choices")))))}function G(e){Object(b.a)({},B,e);return c.a.createElement(c.a.Fragment,null)}var N=[["The Morrigan","The Crook",16],["The Crook","The Morrigan",16],["The Morrigan","Great Arc",20],["Great Arc","The Morrigan",20],["Fivestone","The Crook",14],["The Crook","Fivestone",14],["Shell Cove","Great Arc",12],["Great Arc","Shell Cove",12],["The Splinter","Great Arc",25],["Great Arc","The Splinter",25],["The Pip","The Splinter",15],["The Splinter","The Pip",15],["Afallon","The Splinter",22],["The Splinter","Afallon",22],["Brightreach","The Splinter",23],["The Splinter","Brightreach",23],["Afallon","The Pip",7],["The Pip","Afallon",7],["Brightreach","The Pip",13],["The Pip","Brightreach",13],["Birdstar","The Pip",25],["The Pip","Birdstar",25],["Brightreach","Afallon",12],["Afallon","Brightreach",12],["Old Crone Island","Birdstar",20],["Birdstar","Old Crone Island",20],["Gull's Rest","Shell Cove",22],["Shell Cove","Gull's Rest",22],["Mother","Shell Cove",28],["Shell Cove","Mother",28],["Elder Island","Shell Cove",30],["Shell Cove","Elder Island",30],["Younger Island","Mother",15],["Mother","Younger Island",15],["Father","Mother",10],["Mother","Father",10],["The Twins","Mother",11],["Mother","The Twins",11],["Obsidian Point","Gull's Rest",13],["Gull's Rest","Obsidian Point",13],["Last Hope","Obsidian Point",30],["Obsidian Point","Last Hope",30],["Island of Pearls","Obsidian Point",29],["Obsidian Point","Island of Pearls",29],["Island of Pearls","Last Hope",9],["Last Hope","Island of Pearls",9]],D=function(e){return N.filter(function(t){var a=Object(p.a)(t,3),n=a[0];a[1],a[2];return e===n}).reduce(function(e,t){var a=Object(p.a)(t,3),n=(a[0],a[1]),l=a[2];return Object(b.a)({},e,Object(m.a)({},n,l))},{})};console.log(D("Last Hope"));var W,R=function(e,t,a,n,l){return{id:e,name:e,x:a,y:n,type:t,resources:l.map(function(e){return f[e]}),neighbours:Object.keys(D(e)),neighbourDistance:D(e)}},L={"Shell Cove":R("Shell Cove",v,63,49,[]),"Great Arc":R("Great Arc",S,56,58,[]),"The Morrigan":R("The Morrigan",T,46,75,["Fish","RootVegetables","BushFood","Flax"]),"The Crook":R("The Crook",v,34,87,["Shellfish","Fish","PreciousShells"]),Fivestone:R("Fivestone",E,23,93,[]),"Elder Island":R("Elder Island",E,87,55,[]),"Younger Island":R("Younger Island",j,95,48,["Guano","Birds"]),Mother:R("Mother",T,86,60,["Flax","Birds","PreciousShells","BushFood"]),Father:R("Father",T,95,60,["Bamboo","Fish","Pigs","SturdyWood"]),"The Twins":R("The Twins",E,92,70,[]),Birdstar:R("Birdstar",j,40,30,["Guano","Birds"]),"Last Hope":R("Last Hope",S,97,8,["Shellfish","Fish","Birds","StudyWood","FreshWater"]),"Island of Pearls":R("Island of Pearls",v,98,16,["PreciousShells","Shellfish","Coconuts"]),"Obsidian Point":R("Obsidian Point",E,73,19,[]),"Gull's Rest":R("Gull's Rest",j,70,30,["Guano","Birds"]),"Old Crone Island":R("Old Crone Island",T,40,10,["Coconuts","RootVegetables","Pigs","BushFood"]),"The Splinter":R("The Splinter",E,33,55,[]),Afallon:R("Afallon",S,14,45,["FruitTrees","FreshWater","SturdyWood","Birds","Pigs"]),"The Pip":R("The Pip",v,22,47,["FruitTrees","Fish","SturdyWood"]),Brightreach:R("Brightreach",T,23,35,["PreciousShells","FreshWater","Flax","Shellfish"])},H=a(8),Y=a(9),z=a.n(Y),V={Deep:"#121258",Med:"#5ba9ff",Shallow:"#7ccbff",Light:"#f3f1f1",Outline:"#000d16"},_=(a(25),{places:[{id:"a",x:80,y:120,name:"A"},{id:"b",x:200,y:100,name:"B",isActive:!0,isBig:!0},{id:"c",x:150,y:250,name:"C",isBig:!0}],paths:[],baseMarkerOptions:{stroke:"white",fill:"rgba(255,255,255,0.6)",hachureAngle:65,roughness:1.5},activePlaceOptions:{fill:"red",roughness:0,stroke:"white"},inactivePlaceOptions:{},pathOptions:{},sizes:(W={},Object(m.a)(W,E,5),Object(m.a)(W,j,10),Object(m.a)(W,v,15),Object(m.a)(W,T,25),Object(m.a)(W,S,35),W)});var J=function(e){var t=Object(i.useRef)(null);function a(t){var a=z.a.svg(t),n=H(t),l=Object(b.a)({},_,e),r=l.places,o=l.paths,s=l.baseMarkerOptions,i=l.activePlaceOptions,c=l.inactivePlaceOptions,u=l.lineOptions,d=l.sizes,h=l.currentIsland,m=r,f=s;Object.values(m).forEach(function(l){var r=function(e){var t=e.name,n=e.x,l=e.y,r=e.type,o=e.markerOptions,s=Object(b.a)({},f,t===h?i:c,o);return a.circle(5*n-25,5*l-25,d[r],s)}(l);t.appendChild(r),function(t){n.link("javascript:;").text(t.name).fill(V.Shallow).x(5*t.x-25).y(5*t.y-25+d[t.type]/2).font({size:16,anchor:"middle"}).on("click",function(){e.setCurrentIsland(t.name)})}(l)}),o.forEach(function(e){var n,l,r=Object(p.a)(e,2),o=r[0],s=r[1],i=(n=m[o],l=m[s],a.line(n.x,n.y,l.x,l.y,Object(b.a)({},f,u,{stroke:V.Light})));t.appendChild(i)})}return Object(i.useEffect)(function(){a(t.current)},[t.current]),c.a.createElement("svg",{ref:t,className:"map-svg"})},U={population:0,hasTemple:!1,isDiscovered:!1,boonsAndBurdens:[],numDwellings:0,numTreasures:0};var $=function(){var e=null,t=Object(i.useState)(0),a=Object(p.a)(t,2),n=a[0],l=a[1],r=Object(i.useState)(0),o=Object(p.a)(r,2),s=o[0],u=o[1],d=Object(i.useState)(0),f=Object(p.a)(d,2),E=f[0],j=f[1],v=Object(i.useState)(0),T=Object(p.a)(v,2),S=T[0],y=T[1],w=Object(i.useState)(0),F=Object(p.a)(w,2),B=F[0],P=F[1],k=Object(i.useState)([]),C=Object(p.a)(k,2),x=C[0],A=C[1],I=Object(i.useState)(Object.keys(L).reduce(function(e,t){return Object(b.a)({},e,Object(m.a)({},t,U))},{})),N=Object(p.a)(I,2),D=N[0],W=N[1],R=Object(i.useState)("The Morrigan"),H=Object(p.a)(R,2),Y=H[0],z=H[1],V=function(){return Object.entries(D).filter(function(e){var t=Object(p.a)(e,2);return t[0],t[1].isDiscovered})},_=Object.keys(L).reduce(function(e,t){return Object(b.a)({},e,Object(m.a)({},t,Object(b.a)({},L[t],D[t])))},{});Object(i.useEffect)(function(){W(Object(b.a)({},D,{"The Morrigan":Object(b.a)({},D["The Morrigan"],{isDiscovered:!0})}))},[]);var $=function(e){j(E-e)},q=function(e){u(E-e)},K=function(){if(4===B||9===B){V().forEach(function(e){var t=Object(p.a)(e,2),a=t[0];t[1],j(E+_[a].resources.reduce(function(e,t){return e+O[t]},0)),u(s+_[a].resources.reduce(function(e,t){return e+g[t]},0))}),y(S+1);var e=Math.floor(21*Math.random())-10,t=n+e;l(t<0?0:t>=100?100:t)}B%3===0&&V().filter(function(e){var t=Object(p.a)(e,2);return t[0],t[1].isFoodBoosted}).forEach(function(){j(E+1)});var a=x.filter(function(e){return e.progress>=e.duration});Array.prototype.forEach(function(e){e.action()},a);var r=x.filter(function(e){return e.progress<e.duration});A(r.map(function(e){return Object(b.a)({},e,{progress:e.progress+=1})})),P(B>=9?0:B+1)};Object(i.useEffect)(function(){return e=setInterval(K,250),function(){clearInterval(e)}});var Q=Object(i.useState)(Object.keys(L)),X=Object(p.a)(Q,2),Z=X[0],ee=X[1];return c.a.createElement("main",{className:"game"},c.a.createElement("aside",{className:"left"},c.a.createElement("h2",{className:"title title-subtitle"},"sailsongs of"),c.a.createElement("h1",{className:"title title-title"},"scattershell"),c.a.createElement("div",null,"version 0.3"),c.a.createElement("div",{className:"game-meters"},c.a.createElement("section",null,c.a.createElement("h3",null,"energy"),c.a.createElement("h4",{className:"energy-meter"},S)),c.a.createElement("section",null,c.a.createElement("h3",null,"total resources"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("b",null,s)," materials"),c.a.createElement("li",null,c.a.createElement("b",null,E)," food"),c.a.createElement("li",null,c.a.createElement("b",null,n)," wind")))),c.a.createElement("section",null,c.a.createElement(J,{places:_,currentIsland:Y,setCurrentIsland:z})),c.a.createElement("section",null,c.a.createElement("h3",null,"total scores"),c.a.createElement("ul",null,c.a.createElement("li",null,"islands discovered"),c.a.createElement("li",null,"population"),c.a.createElement("li",null,"dwellings"),c.a.createElement("li",null,"treasures"),c.a.createElement("li",null,"temples")))),c.a.createElement("section",{className:"right"},c.a.createElement("br",null),c.a.createElement(G,null),c.a.createElement("br",null),c.a.createElement(M,Object.assign({},_[Y],{launchExpedition:function(e,t,a){"outRigger"===a&&(q(25),$(50)),"smallFleet"===a&&(q(50),$(250)),"largeFleet"===a&&(q(100),$(500));var n=100*e.neighbourDistance[t],l="Expedition from ".concat(e.name," to ").concat(t);A([].concat(Object(h.a)(x),[{duration:n,name:l,action:function(){ee([].concat(Object(h.a)(Z),[t]))}}]))},addPerson:function(e){W(Object(b.a)({},D,Object(m.a)({},e,Object(b.a)({},D[e],{population:D[e].population+1})))),$(50)},addDwelling:function(e){W(Object(b.a)({},D,Object(m.a)({},e,Object(b.a)({},D[e],{numDwellings:D[e].numDwellings+1})))),q(100)},food:E,wood:s}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(c.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},4:function(e,t,a){}},[[10,1,2]]]);
//# sourceMappingURL=main.72b2b863.chunk.js.map