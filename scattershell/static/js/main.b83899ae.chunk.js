(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,a,t){},40:function(e,a,t){e.exports=t(59)},45:function(e,a,t){},59:function(e,a,t){"use strict";t.r(a);var n,l,r,o,i,s,c,u,d=t(0),m=t.n(d),p=t(29),h=t.n(p),b=(t(45),t(24)),f=t(1),g=t(3),O=t(7),j=t(63),y=t(65),E=(t(21),{Shellfish:"shellfish",Fish:"fish",Pigs:"pigs",Birds:"birds",BushFood:"bush food",Coconuts:"coconuts",RootVegetables:"root vegetables",PreciousShells:"precious shells",FreshWater:"fresh water",Flax:"flax",Bamboo:"bamboo",SturdyWood:"sturdy wood",FruitTrees:"fruit trees",Guano:"guano"}),v=(n={},Object(f.a)(n,E.Shellfish,!1),Object(f.a)(n,E.Fish,!1),Object(f.a)(n,E.Pigs,!1),Object(f.a)(n,E.Birds,!1),Object(f.a)(n,E.BushFood,!1),Object(f.a)(n,E.Coconuts,!0),Object(f.a)(n,E.RootVegetables,!0),Object(f.a)(n,E.PreciousShells,!0),Object(f.a)(n,E.FreshWater,!1),Object(f.a)(n,E.Flax,!1),Object(f.a)(n,E.Bamboo,!1),Object(f.a)(n,E.SturdyWood,!0),Object(f.a)(n,E.FruitTrees,!1),Object(f.a)(n,E.Guano,!1),n),w=(l={},Object(f.a)(l,E.Shellfish,!1),Object(f.a)(l,E.Fish,!1),Object(f.a)(l,E.Pigs,!0),Object(f.a)(l,E.Birds,!1),Object(f.a)(l,E.BushFood,!1),Object(f.a)(l,E.Coconuts,!0),Object(f.a)(l,E.RootVegetables,!0),Object(f.a)(l,E.PreciousShells,!1),Object(f.a)(l,E.FreshWater,!1),Object(f.a)(l,E.Flax,!1),Object(f.a)(l,E.Bamboo,!1),Object(f.a)(l,E.SturdyWood,!1),Object(f.a)(l,E.FruitTrees,!0),Object(f.a)(l,E.Guano,!1),l),S=(r={},Object(f.a)(r,E.Shellfish,2),Object(f.a)(r,E.Fish,2),Object(f.a)(r,E.Pigs,1),Object(f.a)(r,E.Birds,1),Object(f.a)(r,E.BushFood,2),Object(f.a)(r,E.Coconuts,2),Object(f.a)(r,E.RootVegetables,1),Object(f.a)(r,E.PreciousShells,0),Object(f.a)(r,E.FreshWater,2),Object(f.a)(r,E.Flax,0),Object(f.a)(r,E.Bamboo,1),Object(f.a)(r,E.SturdyWood,0),Object(f.a)(r,E.FruitTrees,1),Object(f.a)(r,E.Guano,0),r),k=(o={},Object(f.a)(o,E.Shellfish,1),Object(f.a)(o,E.Fish,0),Object(f.a)(o,E.Pigs,1),Object(f.a)(o,E.Birds,1),Object(f.a)(o,E.BushFood,0),Object(f.a)(o,E.Coconuts,2),Object(f.a)(o,E.RootVegetables,0),Object(f.a)(o,E.PreciousShells,2),Object(f.a)(o,E.FreshWater,0),Object(f.a)(o,E.Flax,2),Object(f.a)(o,E.Bamboo,1),Object(f.a)(o,E.SturdyWood,2),Object(f.a)(o,E.FruitTrees,1),Object(f.a)(o,E.Guano,1),o),F=t(30),P=t(10),T={Deep:"#121258",Med:"#5ba9ff",Shallow:"#7ccbff",Light:"#f3f1f1",Outline:"#000d16",Green:"#00b842"},B=function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return m.a.createElement(F.a,Object.assign({icon:e},t))},C={icons:{chevrondown:B(P.b),chevronright:B(P.c),More:B(P.d),Cancel:B(P.f),Plus:B(P.e),checkmark:B(P.a)}},N={Rocks:"rocky",Guano:"guano",Small:"small",Medium:"medium",Large:"large"},x=(i={},Object(f.a)(i,N.Rocks,"You are disappointed to find an inhospitable outcrop of rocks in the middle of the ocean."),Object(f.a)(i,N.Guano,"This place is covered in guano, hospitable only to the many gulls that dwell here."),Object(f.a)(i,N.Small,"You look out upon a modest but hospitable island."),Object(f.a)(i,N.Medium,"You are relieved to find a plentiful and hospitable island."),Object(f.a)(i,N.Large,"You are glad to the gods to find a massive volcanic island, capable of sustaining a large population."),i),M=(s={},Object(f.a)(s,N.Rocks,"/island_types/rock.png"),Object(f.a)(s,N.Guano,"/island_types/gull3.png"),Object(f.a)(s,N.Small,"/island_types/shells.png"),Object(f.a)(s,N.Medium,"/island_types/coconuts.png"),Object(f.a)(s,N.Large,"/island_types/volcano.png"),s),G=(c={},Object(f.a)(c,N.Rocks,0),Object(f.a)(c,N.Guano,5),Object(f.a)(c,N.Small,10),Object(f.a)(c,N.Medium,50),Object(f.a)(c,N.Large,100),c),L="undeveloped",R="burgeoning",A="developed",W="highly developed",D="advanced",I=function(e){return 10===e.numTreasures&&e.hasTemple?D:e.hasTemple||e.numTreasures>5?W:e.population===G[e.type]?A:e.population>=5?R:L},V={LaunchOutrigger:"outrigger",LaunchFleet:"fleet"},Y=(u={},Object(f.a)(u,V.LaunchOutrigger,{"wood\u0394":-25,"food\u0394":-50,"energy\u0394":-10}),Object(f.a)(u,V.LaunchFleet,{"wood\u0394":-100,"food\u0394":-200,"energy\u0394":-20}),u),H={population:0,hasTemple:!1,hasSettlement:!1,isDiscovered:!1,scatterings:[],numDwellings:0,numTreasures:0,bonusPopulation:0},_={wood:0,food:0,wind:0,energy:0},q={day:1,dayOfWeek:1,weekOfYear:1,season:"rainy season",year:1},z=5,J=t(64);function U(e){var a=e.island,t=e.islands,n=e.launchVoyage,l=e.progressItems,r=a.neighbours.filter(function(e){return t[e].population<5&&0===l.filter(function(a){return a.destName===e}).length});m.a.createElement("i",null,"The wind and sea whisper rumors of nearby islands waiting to be discovered.");return m.a.createElement("ul",{className:"measure"},r.map(function(e,l){var r=t[e];return m.a.createElement("li",{key:"voyagechoice-".concat(e),style:Object(g.a)({marginBottom:"1em",paddingTop:"1em"},l>0?{borderTop:"1px solid ".concat(T.Outline)}:{})},"Launch voyage to ",m.a.createElement("b",null,r.isDiscovered?e:"a rumored land")," -",m.a.createElement("i",null," ",a.neighbourDistance[e]," km away")," ",r.isDiscovered?"(already discovered)":null,m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("ul",null,m.a.createElement("li",null,m.a.createElement(J.a,{onClick:function(){return n(a.name,e,V.LaunchOutrigger)},disabled:!1},"Launch outrigger")," ",m.a.createElement("p",null,"Costs 25 materials, 50 food, 10 energy, 2 people."),m.a.createElement("p",null,"If the destination island is hospitable, it will be populated with the 2 voyagers.")),m.a.createElement("li",null,m.a.createElement(J.a,{onClick:function(){return n(a.name,e,V.LaunchFleet)},disabled:!1},"Launch fleet")," ",m.a.createElement("p",null,"Costs 100 materials, 200 food, 20 energy, 5 people. Required to populate the destination island."," "),m.a.createElement("p",null,"If the destination island is hospitable, it will be populated with the 5 voyagers. If there are any dispersable resources on this island, one will be chosen at random and transferred to the destination island."))))}))}function $(e){var a=e.island,t=e.islands,n=e.launchVoyage,l=e.wood,r=e.food,o=(e.energy,e.wind,e.addDwelling),i=e.addPerson,s=e.progressItems,c=e.spendEnergy,u=e.addSettlement,d=a.type,p=a.population,h=a.name,b=a.hasSettlement,f=p<G[d]&&r>=50,g=a.numDwellings<5&&l>=100,O=l>=250&&p>=5,j=m.a.createElement("section",{className:"current-island-info"},m.a.createElement("h3",null,a.name),"A ",m.a.createElement("b",null,a.type," island"),m.a.createElement("p",null,m.a.createElement("i",null,x[a.type])),m.a.createElement("ul",null,m.a.createElement("li",null,"Development level: ",m.a.createElement("b",null,I(a))),m.a.createElement("li",null,"Has settlement: ",m.a.createElement("b",null,a.hasSettlement?"yes":"no")),m.a.createElement("li",null,"Population: ",m.a.createElement("b",null,a.population),"/",G[a.type]," ",a.bonusPopulation>0?m.a.createElement("b",{className:"bonus"},"+",a.bonusPopulation):""),m.a.createElement("li",null,"Treasures: ",m.a.createElement("b",null,a.numTreasures),"/10"),m.a.createElement("li",null,"Dwellings: ",m.a.createElement("b",null,a.numDwellings),"/5"),m.a.createElement("li",null,"Has temple: ",m.a.createElement("b",null,a.hasTemple?"yes":"no")))),y=m.a.createElement("section",null,m.a.createElement("h3",null,"Resources on this island"),m.a.createElement("br",null)," ",0===a.resources.length?"Nothing of use.":"",m.a.createElement("ul",null,a.resources.map(function(e){return m.a.createElement("li",{key:"".concat(a.name,"_").concat(e)},m.a.createElement("h5",null,e),m.a.createElement("p",null,"(",S[e]," food, ",k[e]," materials per day)"),v[e]?m.a.createElement("p",null,"Requires at least 5 people on the island to gather."):"",w[e]?m.a.createElement("p",null,"Dispersable"):"")}))),E=m.a.createElement("section",{className:"current-island-expeditions mv2"},m.a.createElement("h4",null,"Voyages from ",a.name),m.a.createElement(U,{island:a,islands:t,launchVoyage:n,progressItems:s}));return m.a.createElement("div",{className:"current-island mv2"},m.a.createElement("div",{className:"current-island-header"},m.a.createElement("aside",{className:"current-island-illustration"},m.a.createElement("figure",null,m.a.createElement("img",{src:M[a.type]}))),j),y,m.a.createElement("section",{className:"current-island-options mv2"},m.a.createElement("ul",{className:"island-options measure"},m.a.createElement("li",null,"\u26a1",m.a.createElement(J.a,{onClick:function(){return c(a,V.SpendEnergy)}},"spend energy"),m.a.createElement("div",{className:"island-options-details"},"Exchange your current energy for food and materials. The bonus food and materials received is the food and materials on this island multiplied by the current energy.")),b?null:m.a.createElement("li",null,"\ud83c\udfe0",m.a.createElement(J.a,{onClick:function(){u(h)},disabled:!O,className:"island-options-link"},"build settlement"),m.a.createElement("div",{className:"island-options-details"},m.a.createElement("p",null,"Build a settlement. Costs ",m.a.createElement("b",null,"500 materials"),". At least"," ",m.a.createElement("b",null,"5 people")," need to be present on the island. A settlement allows you to build and add more people to the island."),m.a.createElement("p",null,!O&&l<250?"\ud83d\ude45\u200d\u2640\ufe0f not enough materials":""),m.a.createElement("p",null,!O&&p<5?"\ud83d\ude45\u200d\u2640\ufe0f 5 people required":""))),b?m.a.createElement("li",null,"\ud83d\udc76",m.a.createElement(J.a,{onClick:function(){i(a.name)},disabled:!f,className:"island-options-link"},"add person"),m.a.createElement("div",{className:"island-options-details"},m.a.createElement("p",{className:"measure"},"Add a person to this island's population. Costs an initial"," ",m.a.createElement("b",null,"50 food")," and then ",m.a.createElement("b",null,"1 food per day"),"."),m.a.createElement("p",{className:"measure"},"You need people to explore other islands, upgrade your development level, and harvest certain resources such as"," ",m.a.createElement("b",null,"root vegetables")," and ",m.a.createElement("b",null,"precious shells"),"."),m.a.createElement("p",null,!f&&r<50?"\ud83d\ude45\u200d\u2640\ufe0f not enough food":"",!f&&r>=50?"\ud83d\ude45\u200d\u2640\ufe0f max population reached":""))):null,b?m.a.createElement("li",null,"\ud83c\udfe0",m.a.createElement(J.a,{onClick:function(){o(a.name)},disabled:!g,className:"island-options-link"},"build dwelling"),m.a.createElement("div",{className:"island-options-details"},m.a.createElement("p",null,"Build a dwelling to house more people on this island. Up to five dwellings can be built on this island. Costs ",m.a.createElement("b",null,"100 materials"),"."),!g&&l<100?"\ud83d\ude45\u200d\u2640\ufe0f not enough materials":"",!g&&l>=100?"\ud83d\ude45\u200d\u2640\ufe0f max dwellings reached":"")):null,b?m.a.createElement("li",null,"\ud83d\ude4f",m.a.createElement(J.a,{disabled:!0,className:"island-options-link"},"build temple"),m.a.createElement("div",{className:"island-options-details"},m.a.createElement("p",null,"Build a temple to find treasures to increase the prestige of the island. Costs ",m.a.createElement("b",null,"1000 food")," and ",m.a.createElement("b",null,"1000 energy"),". Once a temple is built, resources will be gathered at a faster rate."),m.a.createElement("h5",null,"scattering"),m.a.createElement("p",null,"Building a temple will bring forth a scattering: a boon or burden will be given to this island and its descendants."),m.a.createElement("h5",null,"treasures"),m.a.createElement("p",null,"Treasures will periodically appear when a temple is built. Acquire all the treasures to maximise an island's development level."))):null)),E)}var K,Q=[["Morrigan","The Crook",16],["The Crook","Morrigan",16],["Morrigan","Great Arc",20],["Great Arc","Morrigan",20],["Fivestone","The Crook",14],["The Crook","Fivestone",14],["Shell Cove","Great Arc",12],["Great Arc","Shell Cove",12],["The Splinter","Great Arc",25],["Great Arc","The Splinter",25],["The Pip","The Splinter",15],["The Splinter","The Pip",15],["Afallon","The Splinter",22],["The Splinter","Afallon",22],["Brightreach","The Splinter",23],["The Splinter","Brightreach",23],["Afallon","The Pip",7],["The Pip","Afallon",7],["Brightreach","The Pip",13],["The Pip","Brightreach",13],["Birdstar","The Pip",25],["The Pip","Birdstar",25],["Brightreach","Afallon",12],["Afallon","Brightreach",12],["Old Crone","Birdstar",20],["Birdstar","Old Crone",20],["Gull's Rest","Shell Cove",22],["Shell Cove","Gull's Rest",22],["Mother","Shell Cove",28],["Shell Cove","Mother",28],["Elder","Shell Cove",30],["Shell Cove","Elder",30],["Younger","Mother",15],["Mother","Younger",15],["Father","Mother",10],["Mother","Father",10],["Twinstone","Mother",11],["Mother","Twinstone",11],["Obsidian Point","Gull's Rest",13],["Gull's Rest","Obsidian Point",13],["Last Hope","Obsidian Point",30],["Obsidian Point","Last Hope",30],["Island of Pearls","Obsidian Point",29],["Obsidian Point","Island of Pearls",29],["Island of Pearls","Last Hope",9],["Last Hope","Island of Pearls",9]],X=function(e){return Q.filter(function(a){var t=Object(O.a)(a,3),n=t[0];t[1],t[2];return e===n}).reduce(function(e,a){var t=Object(O.a)(a,3),n=(t[0],t[1]),l=t[2];return Object(g.a)({},e,Object(f.a)({},n,l))},{})},Z=function(e,a,t,n,l){return{id:e,name:e,x:t,y:n,type:a,resources:l.map(function(e){return E[e]}),neighbours:Object.keys(X(e)),neighbourDistance:X(e)}},ee={"Shell Cove":Z("Shell Cove",N.Small,63,49,["PreciousShells","Fish"]),"Great Arc":Z("Great Arc",N.Large,56,58,["Flax","Bamboo","BushFood","RootVegetables","SturdyWood"]),Morrigan:Z("Morrigan",N.Medium,46,75,["Fish","RootVegetables","BushFood","Flax"]),"The Crook":Z("The Crook",N.Small,34,87,["Shellfish","Fish","PreciousShells"]),Fivestone:Z("Fivestone",N.Rocks,23,93,[]),Elder:Z("Elder",N.Rocks,87,55,[]),Younger:Z("Younger",N.Guano,95,48,["Guano","Birds"]),Mother:Z("Mother",N.Medium,86,60,["Flax","Birds","PreciousShells","BushFood"]),Father:Z("Father",N.Medium,95,60,["Bamboo","Fish","Pigs","SturdyWood"]),Twinstone:Z("Twinstone",N.Rocks,92,70,[]),Birdstar:Z("Birdstar",N.Guano,40,30,["Guano","Birds"]),"Last Hope":Z("Last Hope",N.Large,97,8,["Shellfish","Fish","Birds","SturdyWood","FreshWater"]),"Island of Pearls":Z("Island of Pearls",N.Small,98,18,["PreciousShells","Shellfish","Coconuts"]),"Obsidian Point":Z("Obsidian Point",N.Rocks,73,19,[]),"Gull's Rest":Z("Gull's Rest",N.Guano,70,30,["Guano","Birds"]),"Old Crone":Z("Old Crone",N.Medium,40,10,["Coconuts","RootVegetables","Pigs","BushFood"]),"The Splinter":Z("The Splinter",N.Rocks,33,55,[]),Afallon:Z("Afallon",N.Large,14,45,["FruitTrees","FreshWater","SturdyWood","Birds","Pigs"]),"The Pip":Z("The Pip",N.Small,22,47,["FruitTrees","Fish","SturdyWood"]),Brightreach:Z("Brightreach",N.Medium,23,35,["PreciousShells","FreshWater","Flax","Shellfish"])},ae=t(34),te=t(35),ne=t.n(te),le={places:[{id:"a",x:80,y:120,name:"A"},{id:"b",x:200,y:100,name:"B",isActive:!0,isBig:!0},{id:"c",x:150,y:250,name:"C",isBig:!0}],paths:[],baseMarkerOptions:{fill:T.Green,fillStyle:"solid",hachureAngle:65,roughness:2,stroke:0,fillWeight:2,bowing:2},activePlaceOptions:{fill:T.Green,stroke:T.Light,strokeWidth:5},inactivePlaceOptions:{},pathOptions:{},sizes:(K={},Object(f.a)(K,N.Rocks,5),Object(f.a)(K,N.Guano,10),Object(f.a)(K,N.Small,15),Object(f.a)(K,N.Medium,20),Object(f.a)(K,N.Large,35),K)};var re=function(e){var a=Object(g.a)({},le,e),t=a.places,n=a.paths,l=a.baseMarkerOptions,r=a.activePlaceOptions,o=a.inactivePlaceOptions,i=a.lineOptions,s=a.sizes,c=a.currentIsland,u=-40,p=0,h=t,b=l,f=["The Pip","Elder","Father"],j=Object(d.useRef)(null);function y(a){var t=ne.a.svg(a),l=ae(a);Object.values(h).forEach(function(n){if(n.isDiscovered){var i=function(e){var a=e.name,n=e.x,l=e.y,i=e.type,d=e.markerOptions,m=Object(g.a)({},b,a===c?r:o,d);return t.circle(5*n+u,5*l+p,s[i],m)}(n);a.appendChild(i),function(a){l.link("javascript:;").text(a.name).fill(T.Light).x(5*a.x+u+(-1!==f.indexOf(a.name)?25+s[a.type]:0)).y(5*a.y+p+(-1!==f.indexOf(a.name)?-8:s[a.type]/2+1)).font({family:"Open Sans",size:16,anchor:"middle"}).on("click",function(){e.setCurrentIsland(a.name)})}(n)}}),n.forEach(function(e){var n,l,r=Object(O.a)(e,2),o=r[0],s=r[1],c=(n=h[o],l=h[s],t.line(n.x,n.y,l.x,l.y,Object(g.a)({},b,i,{stroke:T.Light})));a.appendChild(c)})}Object(d.useEffect)(function(){y(j.current),console.log("rendered initial map")},[j.current]);var E=Object.entries(t).map(function(e){var a=Object(O.a)(e,2);return a[0],a[1].isDiscovered}),v=function(){var e=j.current;if(e){for(console.log("re-rendering the map");e.lastChild;)e.removeChild(e.lastChild);y(e)}};return Object(d.useEffect)(v,E),Object(d.useEffect)(v,[c]),m.a.createElement("svg",{ref:j,className:"map-svg"})},oe="0.6",ie=ee.Morrigan.name,se=500;Object(j.f)(C),Object(j.e)({typography:{families:{default:"Open Sans"}},fonts:{large:{fontFamily:"Open Sans"},xLarge:{fontFamily:"Open Sans"},xxLarge:{fontFamily:"Open Sans"},superLarge:{fontFamily:"Open Sans"},mega:{fontFamily:"Open Sans"}},palette:{}});var ce=function(){var e=Object(d.useState)(0),a=Object(O.a)(e,2),t=(a[0],a[1],Object(d.useState)(0)),n=Object(O.a)(t,2),l=(n[0],n[1],Object(d.useState)([])),r=Object(O.a)(l,2),o=r[0],i=r[1],s=Object(d.useState)({"wood\u0394":0,"food\u0394":0,"energy\u0394":0,"wind\u0394":0}),c=Object(O.a)(s,2),u=c[0],p=c[1],h=Object(d.useState)([]),j=Object(O.a)(h,2),E=j[0],w=j[1],F=Object(d.useState)({islands:Object.keys(ee).reduce(function(e,a){return Object(g.a)({},e,Object(f.a)({},a,H))},{}),player:_,world:q}),P=Object(O.a)(F,2),B=P[0],C=P[1],x=B.player,M=x.wind,L=x.wood,R=x.food,A=x.energy,W=Object(d.useState)(ie),D=Object(O.a)(W,2),I=D[0],J=D[1],U=function(){return Object.keys(ee).reduce(function(e,a){return Object(g.a)({},e,Object(f.a)({},a,Object(g.a)({},ee[a],B.islands[a])))},{})};Object(d.useEffect)(function(){ae("Home",ie,V.LaunchFleet,!0)},[]);var K=function(e,a,t,n){C(function(l){var r=e.wood\u0394,o=e.food\u0394,i=e.energy\u0394,s=e.wind\u0394,c=function(e,a){return e+a<0||void 0==a?e:e+a},u={wood:c(l.player.wood,r),food:c(l.player.food,o),wind:Math.min(c(l.player.wind,s),100),energy:c(l.player.energy,i)},d=r&&u.wood===l.player.wood||o&&u.food===l.player.food||s&&u.wind===l.player.wind||i&&u.energy===l.player.energy,m=Object(g.a)({},l.player,u||{}),p=void 0!=a&&!1===a(l.islands),h=void 0==a?l.islands:a(l.islands),b=l.world;return d||void 0==t||p||t(),d&&!n||p?l:{player:m,islands:h,world:b}})},Q=function(e){return i(function(a){return[].concat(Object(b.a)(a),[{live:10,text:e}])})},X=function(e){var a=e.fromName,t=e.toName,n=e.numPeople,l=e.actiontype,r=ee[t],o=r.type===N.Rocks,i="A ".concat(r.type," island was encountered!"),s="An inhospitable outcrop of rocks was encountered. The ".concat(n," voyagers perished."),c="The ".concat(l," voyage from ").concat(a," arrived at ").concat(t,". ").concat(o?s:i);Q(c),K({},function(e){var l=e[t],r=e[a]||{scatterings:[]};return Object(g.a)({},e,Object(f.a)({},t,Object(g.a)({},l,{isDiscovered:!0,scatterings:r.scatterings,population:o?0:l.population+n})))},null,!0)},Z=function(e,a,t){return a.resources.reduce(function(a,n){return a+(!v[n]||v[n]&&t?e[n]:0)},0)};function ae(e,a,t,n){var l,r=(l={},Object(f.a)(l,V.LaunchOutrigger,2),Object(f.a)(l,V.LaunchFleet,5),l),o=function(){w(function(l){var o={duration:n?10:10*ee[e].neighbourDistance[a],isInitial:n,name:n?"Voyage to ".concat(a):"Voyage from ".concat(e," to ").concat(a," by ").concat(t),fromName:e,toName:a,actiontype:t,numPeople:r[t],progress:0};return[].concat(Object(b.a)(l),[Object(g.a)({},o,{action:function(){X(o)}})])})};n?o():K(Y[t],function(a){var n=a[e],l=r[t];return!!(n.population>=l)&&Object(g.a)({},a,Object(f.a)({},e,Object(g.a)({},n,{population:n.population-l})))},o)}!function(e,a){var t=Object(d.useRef)();Object(d.useEffect)(function(){t.current=e},[e]),Object(d.useEffect)(function(){if(null!==a){var e=setInterval(function(){t.current()},a);return function(){return clearInterval(e)}}},[a])}(function(){var e;C(function(e){var a=e.player,t=e.islands,n=a.wood,l=a.food,r=a.energy,o=a.wind,i=0,s=0,c=Math.floor(21*Math.random())-10;Object.entries(t).filter(function(e){var a=Object(O.a)(e,2);return a[0],a[1].isDiscovered}).forEach(function(e){var a=Object(O.a)(e,2),t=a[0],n=a[1],l=ee[t],r=n.population>=5;i+=Z(S,l,r),s+=Z(k,l,r),i-=n.population}),p({"wood\u0394":s,"food\u0394":i,"energy\u0394":1,"wind\u0394":c});var u=n+s,d=l+i,m=r+1,h=o+c;return Object(g.a)({},e,{player:Object(g.a)({},a,{wood:u<0?0:u,food:d<0?0:d,energy:m<0?0:m,wind:h<0?0:h})})}),E.filter(function(e){return e.progress>=e.duration}).forEach(function(e){e.action()}),w(function(e){return e.filter(function(e){return e.progress<e.duration}).map(function(e){var a=e.progress+1+.05*M;return Object(g.a)({},e,{progress:a>e.duration?e.duration:a})})}),e=function(e){var a=e.day,t=e.dayOfWeek,n=e.weekOfYear,l=e.year;return{day:a+1,dayOfWeek:7===t?1:t+1,weekOfYear:52===n?1:7===t?n+1:n,year:52===n?l+1:l}},C(function(a){var t=a.world;return Object(g.a)({},a,{world:e(t)})}),i(function(e){return e.filter(function(e){return e.live>0}).map(function(e){return Object(g.a)({},e,{live:e.live-1})})})},se);var te=u.wood\u0394,ne=u.food\u0394,le=u.energy\u0394,ce=u.wind\u0394,ue=function(e){return 0===e?null:m.a.createElement("span",{className:"game-meter-delta",style:{color:e>0?T.Green:"red"}},"".concat(e>0?"+":"").concat(e))},de=m.a.createElement("section",{className:"journeys-container"},E.length>0?m.a.createElement("ul",null,E.map(function(e){var a=e.name,t=e.progress,n=e.duration,l=e.action,r=e.destName;return m.a.createElement("li",{key:"journey-".concat(l,"-").concat(r)},"\u26f5 ",a," (",Math.round(t)," / ",n," progress)")})):null),me=m.a.createElement("section",{className:"game-meters-container"},m.a.createElement("ul",{className:"game-meters"},m.a.createElement("li",null,m.a.createElement("h4",{className:"game-meter-number"},L," ",ue(te))," ","materials"),m.a.createElement("li",null,m.a.createElement("h4",{className:"game-meter-number"},R," ",ue(ne))," ","food"),m.a.createElement("li",null,m.a.createElement("h4",{className:"game-meter-number"},M," ",ue(ce))," ","wind"),m.a.createElement("li",null,m.a.createElement("h4",{className:"game-meter-number"},A," ",ue(le))," ","energy"))),pe=m.a.createElement("section",{className:"messages-container"},m.a.createElement("ul",null,o.map(function(e){var a=e.text;return m.a.createElement("li",{key:a},a)}))),he=B.world,be=he.day,fe=(he.dayOfWeek,he.weekOfYear),ge=he.year,Oe=m.a.createElement("section",{className:"calendar-container"},m.a.createElement("p",null,"day ".concat(be,", year ").concat(ge," (week ").concat(fe,"/52)")));return m.a.createElement(y.a,null,m.a.createElement("main",{className:"game"},m.a.createElement("aside",{className:"left"},m.a.createElement("h2",{className:"title title-subtitle"},"sailsongs of"),m.a.createElement("h1",{className:"title title-title",title:oe},"scattershell"),m.a.createElement("div",{className:"fixed"},me,de,pe,Oe),m.a.createElement("section",null,m.a.createElement(re,{places:U(),currentIsland:I,setCurrentIsland:J}))),m.a.createElement("section",{className:"right"},m.a.createElement($,{island:U()[I],islands:U(),launchVoyage:ae,addPerson:function(e){K({"food\u0394":-50},function(a){var t=a[e],n=t.population,l=t.bonusPopulation,r=t.hasSettlement,o=ee[e];return!(n===l+G[o.type]||!r)&&Object(g.a)({},a,Object(f.a)({},e,Object(g.a)({},t,{population:n+1})))},function(){Q("a child was born in ".concat(e,"!"))})},addDwelling:function(e){return K({"wood\u0394":-100},function(a){var t=a[e],n=t.numDwellings,l=t.bonusPopulation,r=t.hasSettlement;return!(n===z||!r)&&Object(g.a)({},a,Object(f.a)({},e,Object(g.a)({},t,{numDwellings:n+1,bonusPopulation:l+5})))},function(){Q("a dwelling was built in ".concat(e,"!"))})},food:R,wind:M,wood:L,energy:A,progressItems:E,spendEnergy:function(e){return C(function(a){var t=e.resources,n=a.player,l=n.energy,r=n.food,o=n.wood,i=t.reduce(function(e,a){return e+S[a]},0),s=t.reduce(function(e,a){return e+k[a]},0),c=Object(g.a)({},a.player,{food:r+i*l,wood:o+s*l,energy:0});return Object(g.a)({},a,{player:c})})},addSettlement:function(e){return K({"wood\u0394":-250},function(a){var t=a[e];return!(t.population<5)&&Object(g.a)({},a,Object(f.a)({},e,Object(g.a)({},t,{hasSettlement:!0})))},function(){Q("a settlement was built in ".concat(e,"!"))})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));h.a.render(m.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,1,2]]]);
//# sourceMappingURL=main.b83899ae.chunk.js.map